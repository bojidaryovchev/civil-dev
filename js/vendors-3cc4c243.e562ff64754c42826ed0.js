/*! For license information please see vendors-3cc4c243.e562ff64754c42826ed0.js.LICENSE.txt */
"use strict";(self.webpackChunkcivil_dev=self.webpackChunkcivil_dev||[]).push([[29],{76987:(t,e,r)=>{var n=r(60530),a=r(20368),i=r(39649),o=r(34074),u=r(20116),s=r(14310),l=r(86902),c=r(3649),f=r(97093),d=r(93476),h=r(85507),v=r(23765),p=r(78914),y=r(21611),g=r(54943),_=r(63978),m=r(65420);_(e,"__esModule",{value:!0}),e.default=void 0;n(r(81643));var b=n(r(18777)),w=n(r(93476)),k=n(r(86902)),O=n(r(78914)),S=n(r(23765)),x=n(r(51161)),E=n(r(3649)),L=n(r(41511)),I=n(r(26394)),j=n(r(69198)),P=n(r(87672)),T=n(r(79128));function N(t,e){var r=l(t);if(s){var n=s(t);e&&(n=u(n).call(n,(function(e){return o(t,e).enumerable}))),r.push.apply(r,n)}return r}function A(t){for(var e=1;e<arguments.length;e++){var r,n,u=null!=arguments[e]?arguments[e]:{};e%2?p(r=N(Object(u),!0)).call(r,(function(e){(0,P.default)(t,e,u[e])})):i?a(t,i(u)):p(n=N(Object(u))).call(n,(function(e){_(t,e,o(u,e))}))}return t}function C(){C=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof m?m:{},a=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",o=n.toStringTag||"@@toStringTag";function u(t,e,r){return _(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var a=e&&e.prototype instanceof w?e:w,i=g(a.prototype),o=new N(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(a,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw i;return D()}for(r.method=a,r.arg=i;;){var o=r.delegate;if(o){var u=j(o,r);if(u){if(u===b)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=l(t,e,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===b)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}(t,r,o),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var b={};function w(){}function k(){}function O(){}var S={};u(S,a,(function(){return this}));var x=y&&y(y(A([])));x&&x!==e&&r.call(x,a)&&(S=x);var E=O.prototype=w.prototype=g(S);function L(t){var e;p(e=["next","throw","return"]).call(e,(function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function I(t,e){function n(a,i,o,u){var s=l(t[a],t,i);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==v(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,o,u)}),(function(t){n("throw",t,o,u)})):e.resolve(f).then((function(t){c.value=t,o(c)}),(function(t){return n("throw",t,o,u)}))}u(s.arg)}var a;this._invoke=function(t,r){function i(){return new e((function(e,a){n(t,r,e,a)}))}return a=a?a.then(i,i):i()}}function j(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,j(t,e),"throw"===e.method))return b;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return b}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,b;var a=n.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,b):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,b)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],p(t).call(t,P,this),this.reset(!0)}function A(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:D}}function D(){return{value:void 0,done:!0}}return k.prototype=O,u(E,"constructor",O),u(O,"constructor",k),k.displayName=u(O,o,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===k||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return h?h(t,O):(t.__proto__=O,u(t,o,"GeneratorFunction")),t.prototype=g(E),t},t.awrap=function(t){return{__await:t}},L(I.prototype),u(I.prototype,i,(function(){return this})),t.AsyncIterator=I,t.async=function(e,r,n,a,i){void 0===i&&(i=d);var o=new I(s(e,r,n,a),i);return t.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},L(E),u(E,o,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return f(e).call(e),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=A,N.prototype={constructor:N,reset:function(t){var e;if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,p(e=this.tryEntries).call(e,T),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+c(n).call(n,1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return o.type="throw",o.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),T(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;T(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:A(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),b}},t}var D=r(44820).default,M=null;function R(t){if(t<26)return String.fromCharCode(65+t);if(t<52)return String.fromCharCode(t-26+97);if(t<62)return String.fromCharCode(t-52+48);if(62===t)return"+";if(63===t)return"/";throw new TypeError("Tried to encode large digit "+t+" in base64.")}"undefined"!=typeof XMLHttpRequest&&(M=XMLHttpRequest);var F,U=function(){function t(e,r,n,a,i){(0,I.default)(this,t),(0,P.default)(this,"_name",void 0),(0,P.default)(this,"_url",void 0),(0,P.default)(this,"_source",void 0),(0,P.default)(this,"_previousSave",void 0),(0,P.default)(this,"_data",void 0),(0,P.default)(this,"_requestTask",void 0),(0,P.default)(this,"_metadata",void 0),(0,P.default)(this,"_tags",void 0);var o=n||"";if(this._name=e,this._metadata=a||{},this._tags=i||{},void 0!==r)if((0,L.default)(r))this._data=t.encodeBase64(r),this._source={format:"base64",base64:this._data,type:o};else if("undefined"!=typeof Blob&&r instanceof Blob)this._source={format:"file",file:r,type:o};else if(r&&"string"==typeof r.uri&&void 0!==r.uri)this._source={format:"uri",uri:r.uri,type:o};else{if(!r||"string"!=typeof r.base64)throw new TypeError("Cannot create a Parse.File with that data.");var u,s,l,c=(0,E.default)(u=r.base64.split(",")).call(u,-1)[0],f=o||(0,E.default)(s=(0,E.default)(l=r.base64.split(";")).call(l,0,1)[0].split(":")).call(s,1,2)[0]||"text/plain";this._data=c,this._source={format:"base64",base64:c,type:f}}}var e;return(0,j.default)(t,[{key:"getData",value:(e=(0,x.default)(C().mark((function t(){var e,r,n,a=this;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._data){t.next=2;break}return t.abrupt("return",this._data);case 2:if(this._url){t.next=4;break}throw new Error("Cannot retrieve data for unsaved ParseFile.");case 4:return e={requestTask:function(t){return a._requestTask=t}},r=T.default.getFileController(),t.next=8,r.download(this._url,e);case 8:return n=t.sent,this._data=n.base64,t.abrupt("return",this._data);case 11:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"name",value:function(){return this._name}},{key:"url",value:function(t){if(t=t||{},this._url)return t.forceSecure?this._url.replace(/^http:\/\//i,"https://"):this._url}},{key:"metadata",value:function(){return this._metadata}},{key:"tags",value:function(){return this._tags}},{key:"save",value:function(t){var e=this;(t=t||{}).requestTask=function(t){return e._requestTask=t},t.metadata=this._metadata,t.tags=this._tags;var r=T.default.getFileController();if(this._previousSave||("file"===this._source.format?this._previousSave=r.saveFile(this._name,this._source,t).then((function(t){return e._name=t.name,e._url=t.url,e._data=null,e._requestTask=null,e})):"uri"===this._source.format?this._previousSave=r.download(this._source.uri,t).then((function(n){if(!n||!n.base64)return{};var a={format:"base64",base64:n.base64,type:n.contentType};return e._data=n.base64,e._requestTask=null,r.saveBase64(e._name,a,t)})).then((function(t){return e._name=t.name,e._url=t.url,e._requestTask=null,e})):this._previousSave=r.saveBase64(this._name,this._source,t).then((function(t){return e._name=t.name,e._url=t.url,e._requestTask=null,e}))),this._previousSave)return this._previousSave}},{key:"cancel",value:function(){this._requestTask&&"function"==typeof this._requestTask.abort&&this._requestTask.abort(),this._requestTask=null}},{key:"destroy",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this._name)throw new D(D.FILE_DELETE_UNNAMED_ERROR,"Cannot delete an unnamed file.");var r={useMasterKey:!0};return e.hasOwnProperty("useMasterKey")&&(r.useMasterKey=e.useMasterKey),T.default.getFileController().deleteFile(this._name,r).then((function(){return t._data=null,t._requestTask=null,t}))}},{key:"toJSON",value:function(){return{__type:"File",name:this._name,url:this._url}}},{key:"equals",value:function(e){return this===e||e instanceof t&&this.name()===e.name()&&this.url()===e.url()&&void 0!==this.url()}},{key:"setMetadata",value:function(t){var e,r=this;t&&"object"===(0,S.default)(t)&&(0,O.default)(e=(0,k.default)(t)).call(e,(function(e){r.addMetadata(e,t[e])}))}},{key:"addMetadata",value:function(t,e){"string"==typeof t&&(this._metadata[t]=e)}},{key:"setTags",value:function(t){var e,r=this;t&&"object"===(0,S.default)(t)&&(0,O.default)(e=(0,k.default)(t)).call(e,(function(e){r.addTag(e,t[e])}))}},{key:"addTag",value:function(t,e){"string"==typeof t&&(this._tags[t]=e)}}],[{key:"fromJSON",value:function(e){if("File"!==e.__type)throw new TypeError("JSON object does not represent a ParseFile");var r=new t(e.name);return r._url=e.url,r}},{key:"encodeBase64",value:function(t){var e=[];e.length=Math.ceil(t.length/3);for(var r=0;r<e.length;r++){var n=t[3*r],a=t[3*r+1]||0,i=t[3*r+2]||0,o=3*r+1<t.length,u=3*r+2<t.length;e[r]=[R(n>>2&63),R(n<<4&48|a>>4&15),o?R(a<<2&60|i>>6&3):"=",u?R(63&i):"="].join("")}return e.join("")}}]),t}(),q={saveFile:(F=(0,x.default)(C().mark((function t(e,r,n){var a,i,o,u,s,l;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("file"===r.format){t.next=2;break}throw new Error("saveFile can only be used with File-type sources.");case 2:return t.next=4,new w.default((function(t,e){var n=new FileReader;n.onload=function(){return t(n.result)},n.onerror=function(t){return e(t)},n.readAsDataURL(r.file)}));case 4:return a=t.sent,i=a.split(","),o=(0,b.default)(i,2),u=o[0],s=o[1],l={format:"base64",base64:s||u,type:r.type||(r.file?r.file.type:null)},t.next=10,q.saveBase64(e,l,n);case 10:return t.abrupt("return",t.sent);case 11:case"end":return t.stop()}}),t)}))),function(t,e,r){return F.apply(this,arguments)}),saveBase64:function(t,e,r){if("base64"!==e.format)throw new Error("saveBase64 can only be used with Base64-type sources.");var n={base64:e.base64,fileData:{metadata:A({},r.metadata),tags:A({},r.tags)}};delete r.metadata,delete r.tags,e.type&&(n._ContentType=e.type);var a="files/"+t;return T.default.getRESTController().request("POST",a,n,r)},download:function(t,e){return M?this.downloadAjax(t,e):w.default.reject("Cannot make a request: No definition of XMLHttpRequest was found.")},downloadAjax:function(t,e){return new w.default((function(r,n){var a=new M;a.open("GET",t,!0),a.responseType="arraybuffer",a.onerror=function(t){n(t)},a.onreadystatechange=function(){if(a.readyState===a.DONE){if(!this.response)return r({});var t=new Uint8Array(this.response);r({base64:U.encodeBase64(t),contentType:a.getResponseHeader("content-type")})}},e.requestTask(a),a.send()}))},deleteFile:function(t,e){var r={"X-Parse-Application-ID":T.default.get("APPLICATION_ID")};e.useMasterKey&&(r["X-Parse-Master-Key"]=T.default.get("MASTER_KEY"));var n=T.default.get("SERVER_URL");return"/"!==n[n.length-1]&&(n+="/"),n+="files/"+t,T.default.getRESTController().ajax("DELETE",n,"",r).catch((function(t){return t&&"SyntaxError: Unexpected end of JSON input"!==t?T.default.getRESTController().handleError(t):w.default.resolve()}))},_setXHR:function(t){M=t},_getXHR:function(){return M}};T.default.setFileController(q);var G=U;e.default=G,e.b64Digit=R},78483:(t,e,r)=>{var n=r(60530);r(63978)(e,"__esModule",{value:!0}),e.default=void 0;var a=n(r(23765)),i=n(r(41511)),o=n(r(26394)),u=n(r(69198)),s=n(r(87672)),l=function(){function t(e,r){(0,o.default)(this,t),(0,s.default)(this,"_latitude",void 0),(0,s.default)(this,"_longitude",void 0),(0,i.default)(e)?(t._validate(e[0],e[1]),this._latitude=e[0],this._longitude=e[1]):"object"===(0,a.default)(e)?(t._validate(e.latitude,e.longitude),this._latitude=e.latitude,this._longitude=e.longitude):void 0!==e&&void 0!==r?(t._validate(e,r),this._latitude=e,this._longitude=r):(this._latitude=0,this._longitude=0)}return(0,u.default)(t,[{key:"latitude",get:function(){return this._latitude},set:function(e){t._validate(e,this.longitude),this._latitude=e}},{key:"longitude",get:function(){return this._longitude},set:function(e){t._validate(this.latitude,e),this._longitude=e}},{key:"toJSON",value:function(){return t._validate(this._latitude,this._longitude),{__type:"GeoPoint",latitude:this._latitude,longitude:this._longitude}}},{key:"equals",value:function(e){return e instanceof t&&this.latitude===e.latitude&&this.longitude===e.longitude}},{key:"radiansTo",value:function(t){var e=Math.PI/180,r=this.latitude*e,n=this.longitude*e,a=t.latitude*e,i=t.longitude*e,o=Math.sin((r-a)/2),u=Math.sin((n-i)/2),s=o*o+Math.cos(r)*Math.cos(a)*u*u;return s=Math.min(1,s),2*Math.asin(Math.sqrt(s))}},{key:"kilometersTo",value:function(t){return 6371*this.radiansTo(t)}},{key:"milesTo",value:function(t){return 3958.8*this.radiansTo(t)}}],[{key:"_validate",value:function(t,e){if(isNaN(t)||isNaN(e)||"number"!=typeof t||"number"!=typeof e)throw new TypeError("GeoPoint latitude and longitude must be valid numbers");if(t<-90)throw new TypeError("GeoPoint latitude out of bounds: "+t+" < -90.0.");if(t>90)throw new TypeError("GeoPoint latitude out of bounds: "+t+" > 90.0.");if(e<-180)throw new TypeError("GeoPoint longitude out of bounds: "+e+" < -180.0.");if(e>180)throw new TypeError("GeoPoint longitude out of bounds: "+e+" > 180.0.")}},{key:"current",value:function(){return navigator.geolocation.getCurrentPosition((function(e){return new t(e.coords.latitude,e.coords.longitude)}))}}]),t}();e.default=l},38455:(t,e,r)=>{var n=r(60530),a=r(63978),i=r(1068);a(e,"__esModule",{value:!0}),e.default=void 0;var o=n(r(23765)),u=n(r(69198)),s=n(r(26394)),l=n(r(51379)),c=n(r(214)),f=n(r(66380)),d=n(r(48205));function h(t){var e=function(){if("undefined"==typeof Reflect||!i)return!1;if(i.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(i(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=(0,f.default)(t);if(e){var a=(0,f.default)(this).constructor;r=i(n,arguments,a)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}var v=function(t){(0,l.default)(r,t);var e=h(r);function r(t){var n;if((0,s.default)(this,r),n=e.call(this,"_Installation"),t&&"object"===(0,o.default)(t)&&!n.set(t||{}))throw new Error("Can't create an invalid Installation");return n}return(0,u.default)(r)}(d.default);e.default=v,d.default.registerSubclass("_Installation",v)},12181:(t,e,r)=>{var n=r(60530),a=r(3649),i=r(97093),o=r(93476),u=r(85507),s=r(23765),l=r(78914),c=r(21611),f=r(54943),d=r(63978),h=r(65420);d(e,"__esModule",{value:!0}),e.default=void 0;var v=n(r(81643)),p=n(r(93476)),y=n(r(18777)),g=n(r(51161)),_=n(r(21556)),m=n(r(43933)),b=n(r(79128));function w(){w=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof h?h:{},v=n.iterator||"@@iterator",p=n.asyncIterator||"@@asyncIterator",y=n.toStringTag||"@@toStringTag";function g(t,e,r){return d(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{g({},"")}catch(t){g=function(t,e,r){return t[e]=r}}function _(t,e,r,n){var a=e&&e.prototype instanceof k?e:k,i=f(a.prototype),o=new A(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(a,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw i;return D()}for(r.method=a,r.arg=i;;){var o=r.delegate;if(o){var u=P(o,r);if(u){if(u===b)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=m(t,e,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===b)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}(t,r,o),i}function m(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=_;var b={};function k(){}function O(){}function S(){}var x={};g(x,v,(function(){return this}));var E=c&&c(c(C([])));E&&E!==e&&r.call(E,v)&&(x=E);var L=S.prototype=k.prototype=f(x);function I(t){var e;l(e=["next","throw","return"]).call(e,(function(e){g(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function n(a,i,o,u){var l=m(t[a],t,i);if("throw"!==l.type){var c=l.arg,f=c.value;return f&&"object"==s(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,o,u)}),(function(t){n("throw",t,o,u)})):e.resolve(f).then((function(t){c.value=t,o(c)}),(function(t){return n("throw",t,o,u)}))}u(l.arg)}var a;this._invoke=function(t,r){function i(){return new e((function(e,a){n(t,r,e,a)}))}return a=a?a.then(i,i):i()}}function P(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,P(t,e),"throw"===e.method))return b;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return b}var n=m(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,b;var a=n.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,b):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,b)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],l(t).call(t,T,this),this.reset(!0)}function C(t){if(t){var e=t[v];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:D}}function D(){return{value:void 0,done:!0}}return O.prototype=S,g(L,"constructor",S),g(S,"constructor",O),O.displayName=g(S,y,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===O||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return u?u(t,S):(t.__proto__=S,g(t,y,"GeneratorFunction")),t.prototype=f(L),t},t.awrap=function(t){return{__await:t}},I(j.prototype),g(j.prototype,p,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,a,i){void 0===i&&(i=o);var u=new j(_(e,r,n,a),i);return t.isGeneratorFunction(r)?u:u.next().then((function(t){return t.done?t.value:u.next()}))},I(L),g(L,y,"Generator"),g(L,v,(function(){return this})),g(L,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return i(e).call(e),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=C,A.prototype={constructor:A,reset:function(t){var e;if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,l(e=this.tryEntries).call(e,N),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+a(n).call(n,1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return o.type="throw",o.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;N(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:C(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),b}},t}function k(){return b.default.getLiveQueryController().getDefaultLiveQueryClient()}var O=new _.default;O.open=(0,g.default)(w().mark((function t(){return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k();case 2:t.sent.open();case 4:case"end":return t.stop()}}),t)}))),O.close=(0,g.default)(w().mark((function t(){return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k();case 2:t.sent.close();case 4:case"end":return t.stop()}}),t)}))),O.on("error",(function(){}));var S,x=O;e.default=x;var E={setDefaultLiveQueryClient:function(t){S=t},getDefaultLiveQueryClient:function(){return(0,g.default)(w().mark((function t(){var e,r,n,a,i,o,u,s,l,c,f,d;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!S){t.next=2;break}return t.abrupt("return",S);case 2:return t.next=4,p.default.all([b.default.getUserController().currentUserAsync(),b.default.getInstallationController().currentInstallationId()]);case 4:if(e=t.sent,r=(0,y.default)(e,2),n=r[0],a=r[1],i=n?n.getSessionToken():void 0,!(o=b.default.get("LIVEQUERY_SERVER_URL"))||0===(0,v.default)(o).call(o,"ws")){t.next=12;break}throw new Error("You need to set a proper Parse LiveQuery server url before using LiveQueryClient");case 12:return o||(u=b.default.get("SERVER_URL"),s=0===(0,v.default)(u).call(u,"https")?"wss://":"ws://",l=u.replace(/^https?:\/\//,""),o=s+l,b.default.set("LIVEQUERY_SERVER_URL",o)),c=b.default.get("APPLICATION_ID"),f=b.default.get("JAVASCRIPT_KEY"),d=b.default.get("MASTER_KEY"),(S=new m.default({applicationId:c,serverURL:o,javascriptKey:f,masterKey:d,sessionToken:i,installationId:a})).on("error",(function(t){O.emit("error",t)})),S.on("open",(function(){O.emit("open")})),S.on("close",(function(){O.emit("close")})),t.abrupt("return",S);case 21:case"end":return t.stop()}}),t)})))()},_clearCachedDefaultClient:function(){S=null}};b.default.setLiveQueryController(E)},48205:(t,e,r)=>{var n=r(60530),a=r(52424),i=r(41511),o=r(19996),u=r(66419),s=r(3649),l=r(97093),c=r(93476),f=r(85507),d=r(23765),h=r(21611),v=r(54943),p=r(65420),y=r(63978),g=r(20368),_=r(39649),m=r(78914),b=r(34074),w=r(20116),k=r(14310),O=r(86902);y(e,"__esModule",{value:!0}),e.default=void 0;var S=n(r(2991)),x=n(r(94473)),E=n(r(59036)),L=n(r(63978)),I=n(r(54943)),j=n(r(93476)),P=n(r(41511)),T=n(r(51161)),N=n(r(77766)),A=n(r(21611)),C=n(r(78580)),D=n(r(59340)),M=n(r(78914)),R=n(r(86902)),F=n(r(56474)),U=n(r(23765)),q=n(r(26394)),G=n(r(69198)),K=n(r(87672)),J=n(r(81643)),z=n(r(79128)),W=n(r(29449)),B=n(r(80825)),Y=n(r(27504)),H=n(r(51121)),V=n(r(12889)),Q=n(r(76102)),X=n(r(74158)),Z=n(r(44820)),$=n(r(76987)),tt=r(35430),et=r(43408),rt=r(77733),nt=n(r(35146)),at=n(r(32609)),it=ct(r(1284)),ot=n(r(77831)),ut=ct(r(5969)),st=n(r(52810));function lt(t){if("function"!=typeof a)return null;var e=new a,r=new a;return(lt=function(t){return t?r:e})(t)}function ct(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==d(t)&&"function"!=typeof t)return{default:t};var r=lt(e);if(r&&r.has(t))return r.get(t);var n={};for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var i=y&&b?b(t,a):null;i&&(i.get||i.set)?y(n,a,i):n[a]=t[a]}return n.default=t,r&&r.set(t,n),n}function ft(t,e){var r=void 0!==p&&o(t)||t["@@iterator"];if(!r){if(i(t)||(r=function(t,e){var r;if(!t)return;if("string"==typeof t)return dt(t,e);var n=s(r=Object.prototype.toString.call(t)).call(r,8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return u(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dt(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,f=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return c=t.done,t},e:function(t){f=!0,l=t},f:function(){try{c||null==r.return||r.return()}finally{if(f)throw l}}}}function dt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ht(){ht=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof p?p:{},a=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",o=n.toStringTag||"@@toStringTag";function u(t,e,r){return y(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function g(t,e,r,n){var a=e&&e.prototype instanceof w?e:w,i=v(a.prototype),o=new N(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(a,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw i;return C()}for(r.method=a,r.arg=i;;){var o=r.delegate;if(o){var u=j(o,r);if(u){if(u===b)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=_(t,e,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===b)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}(t,r,o),i}function _(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=g;var b={};function w(){}function k(){}function O(){}var S={};u(S,a,(function(){return this}));var x=h&&h(h(A([])));x&&x!==e&&r.call(x,a)&&(S=x);var E=O.prototype=w.prototype=v(S);function L(t){var e;m(e=["next","throw","return"]).call(e,(function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function I(t,e){function n(a,i,o,u){var s=_(t[a],t,i);if("throw"!==s.type){var l=s.arg,c=l.value;return c&&"object"==d(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,o,u)}),(function(t){n("throw",t,o,u)})):e.resolve(c).then((function(t){l.value=t,o(l)}),(function(t){return n("throw",t,o,u)}))}u(s.arg)}var a;this._invoke=function(t,r){function i(){return new e((function(e,a){n(t,r,e,a)}))}return a=a?a.then(i,i):i()}}function j(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,j(t,e),"throw"===e.method))return b;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return b}var n=_(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,b;var a=n.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,b):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,b)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],m(t).call(t,P,this),this.reset(!0)}function A(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return k.prototype=O,u(E,"constructor",O),u(O,"constructor",k),k.displayName=u(O,o,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===k||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return f?f(t,O):(t.__proto__=O,u(t,o,"GeneratorFunction")),t.prototype=v(E),t},t.awrap=function(t){return{__await:t}},L(I.prototype),u(I.prototype,i,(function(){return this})),t.AsyncIterator=I,t.async=function(e,r,n,a,i){void 0===i&&(i=c);var o=new I(g(e,r,n,a),i);return t.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},L(E),u(E,o,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return l(e).call(e),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=A,N.prototype={constructor:N,reset:function(t){var e;if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,m(e=this.tryEntries).call(e,T),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+s(n).call(n,1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return o.type="throw",o.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),T(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;T(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:A(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),b}},t}function vt(t,e){var r=O(t);if(k){var n=k(t);e&&(n=w(n).call(n,(function(e){return b(t,e).enumerable}))),r.push.apply(r,n)}return r}function pt(t){for(var e=1;e<arguments.length;e++){var r,n,a=null!=arguments[e]?arguments[e]:{};e%2?m(r=vt(Object(a),!0)).call(r,(function(e){(0,K.default)(t,e,a[e])})):_?g(t,_(a)):m(n=vt(Object(a))).call(n,(function(e){y(t,e,b(a,e))}))}return t}var yt=r(90027),gt={},_t=0,mt=!z.default.get("IS_NODE");function bt(){var t=z.default.get("SERVER_URL");"/"!==t[t.length-1]&&(t+="/");var e=t.replace(/https?:\/\//,"");return e.substr((0,J.default)(e).call(e,"/"))}mt?z.default.setObjectStateController(it):z.default.setObjectStateController(ut);var wt=function(){function t(e,r,n){(0,q.default)(this,t),(0,K.default)(this,"id",void 0),(0,K.default)(this,"_localId",void 0),(0,K.default)(this,"_objCount",void 0),(0,K.default)(this,"className",void 0),"function"==typeof this.initialize&&this.initialize.apply(this,arguments);var a=null;if(this._objCount=_t++,"string"==typeof e)this.className=e,r&&"object"===(0,U.default)(r)&&(a=r);else if(e&&"object"===(0,U.default)(e)){for(var i in this.className=e.className,a={},e)"className"!==i&&(a[i]=e[i]);r&&"object"===(0,U.default)(r)&&(n=r)}if(a&&!this.set(a,n))throw new Error("Can't create an invalid Parse Object")}var e,r,n,a,i;return(0,G.default)(t,[{key:"attributes",get:function(){var t=z.default.getObjectStateController();return(0,F.default)(t.estimateAttributes(this._getStateIdentifier()))}},{key:"createdAt",get:function(){return this._getServerData().createdAt}},{key:"updatedAt",get:function(){return this._getServerData().updatedAt}},{key:"_getId",value:function(){if("string"==typeof this.id)return this.id;if("string"==typeof this._localId)return this._localId;var t="local"+yt();return this._localId=t,t}},{key:"_getStateIdentifier",value:function(){if(mt){var t=this.id;return t||(t=this._getId()),{id:t,className:this.className}}return this}},{key:"_getServerData",value:function(){return z.default.getObjectStateController().getServerData(this._getStateIdentifier())}},{key:"_clearServerData",value:function(){var t=this._getServerData(),e={};for(var r in t)e[r]=void 0;z.default.getObjectStateController().setServerData(this._getStateIdentifier(),e)}},{key:"_getPendingOps",value:function(){return z.default.getObjectStateController().getPendingOps(this._getStateIdentifier())}},{key:"_clearPendingOps",value:function(t){var e=this._getPendingOps(),r=e[e.length-1],n=t||(0,R.default)(r);(0,M.default)(n).call(n,(function(t){delete r[t]}))}},{key:"_getDirtyObjectAttributes",value:function(){var e=this.attributes,r=z.default.getObjectStateController().getObjectCache(this._getStateIdentifier()),n={};for(var a in e){var i=e[a];if(i&&"object"===(0,U.default)(i)&&!(i instanceof t)&&!(i instanceof $.default)&&!(i instanceof at.default))try{var o=(0,Y.default)(i,!1,!0),u=(0,D.default)(o);r[a]!==u&&(n[a]=i)}catch(t){n[a]=i}}return n}},{key:"_toFullJSON",value:function(t,e){var r=this.toJSON(t,e);return r.__type="Object",r.className=this.className,r}},{key:"_getSaveJSON",value:function(){var t=this._getPendingOps(),e=this._getDirtyObjectAttributes(),r={};for(var n in e){for(var a=!1,i=0;i<t.length;i+=1)for(var o in t[i]){if((0,C.default)(o).call(o,"."))if(o.split(".")[0]===n){a=!0;break}}a||(r[n]=new rt.SetOp(e[n]).toJSON())}for(n in t[0])r[n]=t[0][n].toJSON();return r}},{key:"_getSaveParams",value:function(){var t=this.id?"PUT":"POST",e=this._getSaveJSON(),r="classes/"+this.className;return z.default.get("ALLOW_CUSTOM_OBJECT_ID")?this.createdAt?(t="PUT",r+="/"+this.id):(t="POST",e.objectId=this.id):this.id?r+="/"+this.id:"_User"===this.className&&(r="users"),{method:t,body:e,path:r}}},{key:"_finishFetch",value:function(t){!this.id&&t.objectId&&(this.id=t.objectId);var e=z.default.getObjectStateController();e.initializeState(this._getStateIdentifier());var r={};for(var n in t)"ACL"===n?r[n]=new Q.default(t[n]):"objectId"!==n&&(r[n]=(0,B.default)(t[n]),r[n]instanceof at.default&&r[n]._ensureParentAndKey(this,n));r.createdAt&&"string"==typeof r.createdAt&&(r.createdAt=(0,X.default)(r.createdAt)),r.updatedAt&&"string"==typeof r.updatedAt&&(r.updatedAt=(0,X.default)(r.updatedAt)),!r.updatedAt&&r.createdAt&&(r.updatedAt=r.createdAt),e.commitServerChanges(this._getStateIdentifier(),r)}},{key:"_setExisted",value:function(t){var e=z.default.getObjectStateController().getState(this._getStateIdentifier());e&&(e.existed=t)}},{key:"_migrateId",value:function(t){if(this._localId&&t)if(mt){var e=z.default.getObjectStateController(),r=e.removeState(this._getStateIdentifier());this.id=t,delete this._localId,r&&e.initializeState(this._getStateIdentifier(),r)}else this.id=t,delete this._localId}},{key:"_handleSaveResponse",value:function(t,e){var r={},n=z.default.getObjectStateController(),a=n.popPendingState(this._getStateIdentifier());for(var i in a)a[i]instanceof rt.RelationOp?r[i]=a[i].applyTo(void 0,this,i):i in t||(r[i]=a[i].applyTo(void 0));for(i in t)if("createdAt"!==i&&"updatedAt"!==i||"string"!=typeof t[i]){if("ACL"===i)r[i]=new Q.default(t[i]);else if("objectId"!==i){var o=(0,B.default)(t[i]);o&&(0,A.default)(o)===Object.prototype?r[i]=pt(pt({},this.attributes[i]),o):r[i]=o,r[i]instanceof rt.UnsetOp&&(r[i]=void 0)}}else r[i]=(0,X.default)(t[i]);r.createdAt&&!r.updatedAt&&(r.updatedAt=r.createdAt),this._migrateId(t.objectId),201!==e&&this._setExisted(!0),n.commitServerChanges(this._getStateIdentifier(),r)}},{key:"_handleSaveError",value:function(){z.default.getObjectStateController().mergeFirstPendingState(this._getStateIdentifier())}},{key:"initialize",value:function(){}},{key:"toJSON",value:function(t,e){var r=this.id?this.className+":"+this.id:this;t=t||[r];var n={},a=this.attributes;for(var i in a)"createdAt"!==i&&"updatedAt"!==i||!a[i].toJSON?n[i]=(0,Y.default)(a[i],!1,!1,t,e):n[i]=a[i].toJSON();var o=this._getPendingOps();for(var u in o[0])n[u]=o[0][u].toJSON(e);return this.id&&(n.objectId=this.id),n}},{key:"equals",value:function(e){return this===e||e instanceof t&&this.className===e.className&&this.id===e.id&&void 0!==this.id}},{key:"dirty",value:function(t){if(!this.id)return!0;var e=this._getPendingOps(),r=this._getDirtyObjectAttributes();if(t){if(r.hasOwnProperty(t))return!0;for(var n=0;n<e.length;n++)if(e[n].hasOwnProperty(t))return!0;return!1}return 0!==(0,R.default)(e[0]).length||0!==(0,R.default)(r).length}},{key:"dirtyKeys",value:function(){for(var t=this._getPendingOps(),e={},r=0;r<t.length;r++)for(var n in t[r])e[n]=!0;var a=this._getDirtyObjectAttributes();for(var i in a)e[i]=!0;return(0,R.default)(e)}},{key:"isDataAvailable",value:function(){var t=this._getServerData();return!!(0,R.default)(t).length}},{key:"toPointer",value:function(){if(!this.id)throw new Error("Cannot create a pointer to an unsaved ParseObject");return{__type:"Pointer",className:this.className,objectId:this.id}}},{key:"toOfflinePointer",value:function(){if(!this._localId)throw new Error("Cannot create a offline pointer to a saved ParseObject");return{__type:"Object",className:this.className,_localId:this._localId}}},{key:"get",value:function(t){return this.attributes[t]}},{key:"relation",value:function(t){var e=this.get(t);if(e){if(!(e instanceof at.default))throw new Error("Called relation() on non-relation field "+t);return e._ensureParentAndKey(this,t),e}return new at.default(this,t)}},{key:"escape",value:function(t){var e=this.attributes[t];if(null==e)return"";if("string"!=typeof e){if("function"!=typeof e.toString)return"";e=e.toString()}return(0,H.default)(e)}},{key:"has",value:function(t){var e=this.attributes;return!!e.hasOwnProperty(t)&&null!=e[t]}},{key:"set",value:function(t,e,r){var n={},a={};if(t&&"object"===(0,U.default)(t))n=t,r=e;else{if("string"!=typeof t)return this;n[t]=e}r=r||{};var i=[];for(var o in"function"==typeof this.constructor.readOnlyAttributes&&(i=(0,N.default)(i).call(i,this.constructor.readOnlyAttributes())),n)if("createdAt"!==o&&"updatedAt"!==o){if((0,J.default)(i).call(i,o)>-1)throw new Error("Cannot modify readonly attribute: "+o);if(r.unset)a[o]=new rt.UnsetOp;else if(n[o]instanceof rt.Op)a[o]=n[o];else if(n[o]&&"object"===(0,U.default)(n[o])&&"string"==typeof n[o].__op)a[o]=(0,rt.opFromJSON)(n[o]);else if("objectId"===o||"id"===o)"string"==typeof n[o]&&(this.id=n[o]);else if("ACL"!==o||"object"!==(0,U.default)(n[o])||n[o]instanceof Q.default)if(n[o]instanceof at.default){var u=new at.default(this,o);u.targetClassName=n[o].targetClassName,a[o]=new rt.SetOp(u)}else a[o]=new rt.SetOp(n[o]);else a[o]=new rt.SetOp(new Q.default(n[o]))}var s=this.attributes,l={};for(var c in a)a[c]instanceof rt.RelationOp?l[c]=a[c].applyTo(s[c],this,c):a[c]instanceof rt.UnsetOp||(l[c]=a[c].applyTo(s[c]));if(!r.ignoreValidation){var f=this.validate(l);if(f)return"function"==typeof r.error&&r.error(this,f),!1}var d=this._getPendingOps(),h=d.length-1,v=z.default.getObjectStateController();for(var p in a){var y=a[p].mergeWith(d[h][p]);v.setPendingOp(this._getStateIdentifier(),p,y)}return this}},{key:"unset",value:function(t,e){return(e=e||{}).unset=!0,this.set(t,null,e)}},{key:"increment",value:function(t,e){if(void 0===e&&(e=1),"number"!=typeof e)throw new Error("Cannot increment by a non-numeric amount.");return this.set(t,new rt.IncrementOp(e))}},{key:"decrement",value:function(t,e){if(void 0===e&&(e=1),"number"!=typeof e)throw new Error("Cannot decrement by a non-numeric amount.");return this.set(t,new rt.IncrementOp(-1*e))}},{key:"add",value:function(t,e){return this.set(t,new rt.AddOp([e]))}},{key:"addAll",value:function(t,e){return this.set(t,new rt.AddOp(e))}},{key:"addUnique",value:function(t,e){return this.set(t,new rt.AddUniqueOp([e]))}},{key:"addAllUnique",value:function(t,e){return this.set(t,new rt.AddUniqueOp(e))}},{key:"remove",value:function(t,e){return this.set(t,new rt.RemoveOp([e]))}},{key:"removeAll",value:function(t,e){return this.set(t,new rt.RemoveOp(e))}},{key:"op",value:function(t){for(var e=this._getPendingOps(),r=e.length;r--;)if(e[r][t])return e[r][t]}},{key:"clone",value:function(){var t=new this.constructor(this.className),e=this.attributes;if("function"==typeof this.constructor.readOnlyAttributes){var r=this.constructor.readOnlyAttributes()||[],n={};for(var a in e)(0,J.default)(r).call(r,a)<0&&(n[a]=e[a]);e=n}return t.set&&t.set(e),t}},{key:"newInstance",value:function(){var t=new this.constructor(this.className);if(t.id=this.id,mt)return t;var e=z.default.getObjectStateController();return e&&e.duplicateState(this._getStateIdentifier(),t._getStateIdentifier()),t}},{key:"isNew",value:function(){return!this.id}},{key:"existed",value:function(){if(!this.id)return!1;var t=z.default.getObjectStateController().getState(this._getStateIdentifier());return!!t&&t.existed}},{key:"exists",value:(i=(0,T.default)(ht().mark((function t(e){var r;return ht().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.id){t.next=2;break}return t.abrupt("return",!1);case 2:return t.prev=2,r=new nt.default(this.className),t.next=6,r.get(this.id,e);case 6:return t.abrupt("return",!0);case 9:if(t.prev=9,t.t0=t.catch(2),t.t0.code!==Z.default.OBJECT_NOT_FOUND){t.next=13;break}return t.abrupt("return",!1);case 13:throw t.t0;case 14:case"end":return t.stop()}}),t,this,[[2,9]])}))),function(t){return i.apply(this,arguments)})},{key:"isValid",value:function(){return!this.validate(this.attributes)}},{key:"validate",value:function(t){if(t.hasOwnProperty("ACL")&&!(t.ACL instanceof Q.default))return new Z.default(Z.default.OTHER_CAUSE,"ACL must be a Parse ACL.");for(var e in t)if(!/^[A-Za-z][0-9A-Za-z_.]*$/.test(e))return new Z.default(Z.default.INVALID_KEY_NAME);return!1}},{key:"getACL",value:function(){var t=this.get("ACL");return t instanceof Q.default?t:null}},{key:"setACL",value:function(t,e){return this.set("ACL",t,e)}},{key:"revert",value:function(){for(var t,e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(r.length){t=[];var a,i=ft(r);try{for(i.s();!(a=i.n()).done;){var o=a.value;if("string"!=typeof o)throw new Error("Parse.Object#revert expects either no, or a list of string, arguments.");t.push(o)}}catch(t){i.e(t)}finally{i.f()}}this._clearPendingOps(t)}},{key:"clear",value:function(){var t=this.attributes,e={},r=["createdAt","updatedAt"];for(var n in"function"==typeof this.constructor.readOnlyAttributes&&(r=(0,N.default)(r).call(r,this.constructor.readOnlyAttributes())),t)(0,J.default)(r).call(r,n)<0&&(e[n]=!0);return this.set(e,{unset:!0})}},{key:"fetch",value:function(t){var e,r={};((t=t||{}).hasOwnProperty("useMasterKey")&&(r.useMasterKey=t.useMasterKey),t.hasOwnProperty("sessionToken")&&(r.sessionToken=t.sessionToken),t.hasOwnProperty("context")&&"object"===(0,U.default)(t.context)&&(r.context=t.context),t.hasOwnProperty("include"))&&(r.include=[],(0,P.default)(t.include)?(0,M.default)(e=t.include).call(e,(function(t){var e;(0,P.default)(t)?r.include=(0,N.default)(e=r.include).call(e,t):r.include.push(t)})):r.include.push(t.include));return z.default.getObjectController().fetch(this,!0,r)}},{key:"fetchWithInclude",value:function(t,e){return(e=e||{}).include=t,this.fetch(e)}},{key:"saveEventually",value:(a=(0,T.default)(ht().mark((function t(e){return ht().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.save(null,e);case 3:t.next=11;break;case 5:if(t.prev=5,t.t0=t.catch(0),'XMLHttpRequest failed: "Unable to connect to the Parse API"'!==t.t0.message){t.next=11;break}return t.next=10,V.default.save(this,e);case 10:V.default.poll();case 11:return t.abrupt("return",this);case 12:case"end":return t.stop()}}),t,this,[[0,5]])}))),function(t){return a.apply(this,arguments)})},{key:"save",value:function(t,e,r){var n,a,i=this;if("object"===(0,U.default)(t)||void 0===t?(n=t,"object"===(0,U.default)(e)&&(a=e)):((n={})[t]=e,a=r),n){var o=this.validate(n);if(o)return j.default.reject(o);this.set(n,a)}var u={};(a=a||{}).hasOwnProperty("useMasterKey")&&(u.useMasterKey=!!a.useMasterKey),a.hasOwnProperty("sessionToken")&&"string"==typeof a.sessionToken&&(u.sessionToken=a.sessionToken),a.hasOwnProperty("installationId")&&"string"==typeof a.installationId&&(u.installationId=a.installationId),a.hasOwnProperty("context")&&"object"===(0,U.default)(a.context)&&(u.context=a.context);var s=z.default.getObjectController(),l=!1!==a.cascadeSave?(0,st.default)(this):null;return s.save(l,u).then((function(){return s.save(i,u)}))}},{key:"destroyEventually",value:(n=(0,T.default)(ht().mark((function t(e){return ht().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.destroy(e);case 3:t.next=11;break;case 5:if(t.prev=5,t.t0=t.catch(0),'XMLHttpRequest failed: "Unable to connect to the Parse API"'!==t.t0.message){t.next=11;break}return t.next=10,V.default.destroy(this,e);case 10:V.default.poll();case 11:return t.abrupt("return",this);case 12:case"end":return t.stop()}}),t,this,[[0,5]])}))),function(t){return n.apply(this,arguments)})},{key:"destroy",value:function(t){var e={};return(t=t||{}).hasOwnProperty("useMasterKey")&&(e.useMasterKey=t.useMasterKey),t.hasOwnProperty("sessionToken")&&(e.sessionToken=t.sessionToken),t.hasOwnProperty("context")&&"object"===(0,U.default)(t.context)&&(e.context=t.context),this.id?z.default.getObjectController().destroy(this,e):j.default.resolve()}},{key:"pin",value:function(){return t.pinAllWithName(et.DEFAULT_PIN,[this])}},{key:"unPin",value:function(){return t.unPinAllWithName(et.DEFAULT_PIN,[this])}},{key:"isPinned",value:(r=(0,T.default)(ht().mark((function t(){var e,r,n;return ht().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((e=z.default.getLocalDatastore()).isEnabled){t.next=3;break}return t.abrupt("return",j.default.reject("Parse.enableLocalDatastore() must be called first"));case 3:return r=e.getKeyForObject(this),t.next=6,e.fromPinWithName(r);case 6:return n=t.sent,t.abrupt("return",n.length>0);case 8:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"pinWithName",value:function(e){return t.pinAllWithName(e,[this])}},{key:"unPinWithName",value:function(e){return t.unPinAllWithName(e,[this])}},{key:"fetchFromLocalDatastore",value:(e=(0,T.default)(ht().mark((function e(){var r,n,a,i;return ht().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=z.default.getLocalDatastore()).isEnabled){e.next=3;break}throw new Error("Parse.enableLocalDatastore() must be called first");case 3:return n=r.getKeyForObject(this),e.next=6,r._serializeObject(n);case 6:if(a=e.sent){e.next=9;break}throw new Error("Cannot fetch an unsaved ParseObject");case 9:return i=t.fromJSON(a),this._finishFetch(i.toJSON()),e.abrupt("return",this);case 12:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})}],[{key:"_getClassMap",value:function(){return gt}},{key:"_clearAllState",value:function(){z.default.getObjectStateController().clearAllState()}},{key:"fetchAll",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={};return r.hasOwnProperty("useMasterKey")&&(n.useMasterKey=r.useMasterKey),r.hasOwnProperty("sessionToken")&&(n.sessionToken=r.sessionToken),r.hasOwnProperty("include")&&(n.include=t.handleIncludeOptions(r)),z.default.getObjectController().fetch(e,!0,n)}},{key:"fetchAllWithInclude",value:function(e,r,n){return(n=n||{}).include=r,t.fetchAll(e,n)}},{key:"fetchAllIfNeededWithInclude",value:function(e,r,n){return(n=n||{}).include=r,t.fetchAllIfNeeded(e,n)}},{key:"fetchAllIfNeeded",value:function(e,r){var n={};return(r=r||{}).hasOwnProperty("useMasterKey")&&(n.useMasterKey=r.useMasterKey),r.hasOwnProperty("sessionToken")&&(n.sessionToken=r.sessionToken),r.hasOwnProperty("include")&&(n.include=t.handleIncludeOptions(r)),z.default.getObjectController().fetch(e,!1,n)}},{key:"handleIncludeOptions",value:function(t){var e,r=[];(0,P.default)(t.include)?(0,M.default)(e=t.include).call(e,(function(t){(0,P.default)(t)?r=(0,N.default)(r).call(r,t):r.push(t)})):r.push(t.include);return r}},{key:"destroyAll",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={};return e.hasOwnProperty("useMasterKey")&&(r.useMasterKey=e.useMasterKey),e.hasOwnProperty("sessionToken")&&(r.sessionToken=e.sessionToken),e.hasOwnProperty("batchSize")&&"number"==typeof e.batchSize&&(r.batchSize=e.batchSize),e.hasOwnProperty("context")&&"object"===(0,U.default)(e.context)&&(r.context=e.context),z.default.getObjectController().destroy(t,r)}},{key:"saveAll",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={};return e.hasOwnProperty("useMasterKey")&&(r.useMasterKey=e.useMasterKey),e.hasOwnProperty("sessionToken")&&(r.sessionToken=e.sessionToken),e.hasOwnProperty("batchSize")&&"number"==typeof e.batchSize&&(r.batchSize=e.batchSize),e.hasOwnProperty("context")&&"object"===(0,U.default)(e.context)&&(r.context=e.context),z.default.getObjectController().save(t,r)}},{key:"createWithoutData",value:function(t){var e=new this;return e.id=t,e}},{key:"fromJSON",value:function(e,r,n){if(!e.className)throw new Error("Cannot create an object without a className");var a=gt[e.className],i=a?new a(e.className):new t(e.className),o={};for(var u in e)"className"!==u&&"__type"!==u&&(o[u]=e[u],n&&i.set(u,e[u]));if(r){o.objectId&&(i.id=o.objectId);var s=null;"function"==typeof i._preserveFieldsOnFetch&&(s=i._preserveFieldsOnFetch()),i._clearServerData(),s&&i._finishFetch(s)}return i._finishFetch(o),e.objectId&&i._setExisted(!0),i}},{key:"registerSubclass",value:function(t,e){if("string"!=typeof t)throw new TypeError("The first argument must be a valid class name.");if(void 0===e)throw new TypeError("You must supply a subclass constructor.");if("function"!=typeof e)throw new TypeError("You must register the subclass constructor. Did you attempt to register an instance of the subclass?");gt[t]=e,e.className||(e.className=t)}},{key:"unregisterSubclass",value:function(t){if("string"!=typeof t)throw new TypeError("The first argument must be a valid class name.");delete gt[t]}},{key:"extend",value:function(e,r,n){if("string"!=typeof e){if(e&&"string"==typeof e.className)return t.extend(e.className,e,r);throw new Error("Parse.Object.extend's first argument should be the className.")}var a=e;"User"===a&&z.default.get("PERFORM_USER_REWRITE")&&(a="_User");var i=t.prototype;this.hasOwnProperty("__super__")&&this.__super__&&(i=this.prototype);var o=function(t,e){if(this.className=a,this._objCount=_t++,"function"==typeof this.initialize&&this.initialize.apply(this,arguments),this._initializers){var r,n=ft(this._initializers);try{for(n.s();!(r=n.n()).done;){r.value.apply(this,arguments)}}catch(t){n.e(t)}finally{n.f()}}if(t&&"object"===(0,U.default)(t)&&!this.set(t||{},e))throw new Error("Can't create an invalid Parse Object")};if(gt[a]?o=gt[a]:(o.extend=function(e,r,n){return"string"==typeof e?t.extend.call(o,e,r,n):t.extend.call(o,a,e,r)},o.createWithoutData=t.createWithoutData,o.className=a,o.__super__=i,o.prototype=(0,I.default)(i,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}})),r)for(var u in r){var s;if("initialize"!==u)"className"!==u&&(0,L.default)(o.prototype,u,{value:r[u],enumerable:!1,writable:!0,configurable:!0});else(0,L.default)(o.prototype,"_initializers",{value:(0,N.default)(s=[]).call(s,(0,E.default)(o.prototype._initializers||[]),[r[u]]),enumerable:!1,writable:!0,configurable:!0})}if(n)for(var l in n)"className"!==l&&(0,L.default)(o,l,{value:n[l],enumerable:!1,writable:!0,configurable:!0});return gt[a]=o,o}},{key:"enableSingleInstance",value:function(){mt=!0,z.default.setObjectStateController(it)}},{key:"disableSingleInstance",value:function(){mt=!1,z.default.setObjectStateController(ut)}},{key:"pinAll",value:function(e){return z.default.getLocalDatastore().isEnabled?t.pinAllWithName(et.DEFAULT_PIN,e):j.default.reject("Parse.enableLocalDatastore() must be called first")}},{key:"pinAllWithName",value:function(t,e){var r=z.default.getLocalDatastore();return r.isEnabled?r._handlePinAllWithName(t,e):j.default.reject("Parse.enableLocalDatastore() must be called first")}},{key:"unPinAll",value:function(e){return z.default.getLocalDatastore().isEnabled?t.unPinAllWithName(et.DEFAULT_PIN,e):j.default.reject("Parse.enableLocalDatastore() must be called first")}},{key:"unPinAllWithName",value:function(t,e){var r=z.default.getLocalDatastore();return r.isEnabled?r._handleUnPinAllWithName(t,e):j.default.reject("Parse.enableLocalDatastore() must be called first")}},{key:"unPinAllObjects",value:function(){var t=z.default.getLocalDatastore();return t.isEnabled?t.unPinWithName(et.DEFAULT_PIN):j.default.reject("Parse.enableLocalDatastore() must be called first")}},{key:"unPinAllObjectsWithName",value:function(t){var e=z.default.getLocalDatastore();return e.isEnabled?e.unPinWithName(et.PIN_PREFIX+t):j.default.reject("Parse.enableLocalDatastore() must be called first")}}]),t}(),kt={fetch:function(t,e,r){var n=z.default.getLocalDatastore();if((0,P.default)(t)){if(t.length<1)return j.default.resolve([]);var a=[],i=[],o=null,u=[],s=null;if((0,M.default)(t).call(t,(function(t){s||(o||(o=t.className),o!==t.className&&(s=new Z.default(Z.default.INVALID_CLASS_NAME,"All objects should be of the same class")),t.id||(s=new Z.default(Z.default.MISSING_OBJECT_ID,"All objects must have an ID")),!e&&t.isDataAvailable()||(i.push(t.id),a.push(t)),u.push(t))})),s)return j.default.reject(s);var l=new nt.default(o);return l.containedIn("objectId",i),r&&r.include&&l.include(r.include),l._limit=i.length,(0,x.default)(l).call(l,r).then(function(){var t=(0,T.default)(ht().mark((function t(r){var i,o,s,l,c,f,d,h,v;return ht().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i={},(0,M.default)(r).call(r,(function(t){i[t.id]=t})),o=0;case 3:if(!(o<a.length)){t.next=11;break}if((s=a[o])&&s.id&&i[s.id]){t.next=8;break}if(!e){t.next=8;break}return t.abrupt("return",j.default.reject(new Z.default(Z.default.OBJECT_NOT_FOUND,"All objects must exist on the server.")));case 8:o++,t.next=3;break;case 11:if(!mt)for(l=0;l<u.length;l++)(c=u[l])&&c.id&&i[c.id]&&(f=c.id,c._finishFetch(i[f].toJSON()),u[l]=i[f]);d=ft(u),t.prev=13,d.s();case 15:if((h=d.n()).done){t.next=21;break}return v=h.value,t.next=19,n._updateObjectIfPinned(v);case 19:t.next=15;break;case 21:t.next=26;break;case 23:t.prev=23,t.t0=t.catch(13),d.e(t.t0);case 26:return t.prev=26,d.f(),t.finish(26);case 29:return t.abrupt("return",j.default.resolve(u));case 30:case"end":return t.stop()}}),t,null,[[13,23,26,29]])})));return function(e){return t.apply(this,arguments)}}())}if(t instanceof wt){if(!t.id)return j.default.reject(new Z.default(Z.default.MISSING_OBJECT_ID,"Object does not have an ID"));var c=z.default.getRESTController(),f={};return r&&r.include&&(f.include=r.include.join()),c.request("GET","classes/"+t.className+"/"+t._getId(),f,r).then(function(){var e=(0,T.default)(ht().mark((function e(r){return ht().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._clearPendingOps(),t._clearServerData(),t._finishFetch(r),e.next=5,n._updateObjectIfPinned(t);case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}return j.default.resolve()},destroy:function(t,e){return(0,T.default)(ht().mark((function r(){var n,a,i,o,u,s;return ht().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=e&&e.batchSize?e.batchSize:z.default.get("REQUEST_BATCH_SIZE"),a=z.default.getLocalDatastore(),i=z.default.getRESTController(),!(0,P.default)(t)){r.next=15;break}if(!(t.length<1)){r.next=6;break}return r.abrupt("return",j.default.resolve([]));case 6:return o=[[]],(0,M.default)(t).call(t,(function(t){t.id&&(o[o.length-1].push(t),o[o.length-1].length>=n&&o.push([]))})),0===o[o.length-1].length&&o.pop(),u=j.default.resolve(),s=[],(0,M.default)(o).call(o,(function(t){u=u.then((function(){return i.request("POST","batch",{requests:(0,S.default)(t).call(t,(function(t){return{method:"DELETE",path:bt()+"classes/"+t.className+"/"+t._getId(),body:{}}}))},e).then((function(e){for(var r=0;r<e.length;r++)if(e[r]&&e[r].hasOwnProperty("error")){var n=new Z.default(e[r].error.code,e[r].error.error);n.object=t[r],s.push(n)}}))}))})),r.abrupt("return",u.then((0,T.default)(ht().mark((function e(){var r,n,i,o;return ht().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s.length){e.next=4;break}return(r=new Z.default(Z.default.AGGREGATE_ERROR)).errors=s,e.abrupt("return",j.default.reject(r));case 4:n=ft(t),e.prev=5,n.s();case 7:if((i=n.n()).done){e.next=13;break}return o=i.value,e.next=11,a._destroyObjectIfPinned(o);case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),n.e(e.t0);case 18:return e.prev=18,n.f(),e.finish(18);case 21:return e.abrupt("return",j.default.resolve(t));case 22:case"end":return e.stop()}}),e,null,[[5,15,18,21]])})))));case 15:if(!(t instanceof wt)){r.next=17;break}return r.abrupt("return",i.request("DELETE","classes/"+t.className+"/"+t._getId(),{},e).then((0,T.default)(ht().mark((function e(){return ht().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a._destroyObjectIfPinned(t);case 2:return e.abrupt("return",j.default.resolve(t));case 3:case"end":return e.stop()}}),e)})))));case 17:return r.abrupt("return",j.default.resolve(t));case 18:case"end":return r.stop()}}),r)})))()},save:function(t,e){var r=e&&e.batchSize?e.batchSize:z.default.get("REQUEST_BATCH_SIZE"),n=z.default.getLocalDatastore(),a={},i=z.default.getRESTController(),o=z.default.getObjectStateController(),u=z.default.get("ALLOW_CUSTOM_OBJECT_ID");if((e=e||{}).returnStatus=e.returnStatus||!0,(0,P.default)(t)){if(t.length<1)return j.default.resolve([]);for(var s=(0,N.default)(t).call(t),l=0;l<t.length;l++)t[l]instanceof wt&&(s=(0,N.default)(s).call(s,(0,st.default)(t[l],!0)));s=(0,ot.default)(s);var c=[],f=[];return(0,M.default)(s).call(s,(function(t){t instanceof $.default?c.push(t.save(e)):t instanceof wt&&f.push(t)})),j.default.all(c).then((function(){var s=null;return(0,tt.continueWhile)((function(){return f.length>0}),(function(){var t=[],n=[];if((0,M.default)(f).call(f,(function(e){if(u&&Object.prototype.hasOwnProperty.call(e,"id")&&!e.id)throw new Z.default(Z.default.MISSING_OBJECT_ID,"objectId must not be empty or null");t.length<r&&(0,W.default)(e)?t.push(e):n.push(e)})),f=n,t.length<1)return j.default.reject(new Z.default(Z.default.OTHER_CAUSE,"Tried to save a batch with a cycle."));var l=new tt.resolvingPromise,c=[],d=[];return(0,M.default)(t).call(t,(function(t,e){var r=new tt.resolvingPromise;c.push(r);o.pushPendingState(t._getStateIdentifier()),d.push(o.enqueueTask(t._getStateIdentifier(),(function(){return r.resolve(),l.then((function(r){if(r[e].hasOwnProperty("success")){var n=r[e].success.objectId,i=r[e]._status;delete r[e]._status,a[n]=t._localId,t._handleSaveResponse(r[e].success,i)}else{if(!s&&r[e].hasOwnProperty("error")){var o=r[e].error;s=new Z.default(o.code,o.error),f=[]}t._handleSaveError()}}))})))})),(0,tt.when)(c).then((function(){return i.request("POST","batch",{requests:(0,S.default)(t).call(t,(function(t){var e=t._getSaveParams();return e.path=bt()+e.path,e}))},e)})).then(l.resolve,(function(t){l.reject(new Z.default(Z.default.INCORRECT_TYPE,t.message))})),(0,tt.when)(d)})).then((0,T.default)(ht().mark((function e(){var r,i,o;return ht().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=2;break}return e.abrupt("return",j.default.reject(s));case 2:r=ft(t),e.prev=3,r.s();case 5:if((i=r.n()).done){e.next=13;break}return o=i.value,e.next=9,n._updateLocalIdForObject(a[o.id],o);case 9:return e.next=11,n._updateObjectIfPinned(o);case 11:e.next=5;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",j.default.resolve(t));case 22:case"end":return e.stop()}}),e,null,[[3,15,18,21]])}))))}))}if(t instanceof wt){if(u&&Object.prototype.hasOwnProperty.call(t,"id")&&!t.id)throw new Z.default(Z.default.MISSING_OBJECT_ID,"objectId must not be empty or null");t._getId();var d=t._localId,h=t;return o.pushPendingState(t._getStateIdentifier()),o.enqueueTask(t._getStateIdentifier(),(function(){var t=h._getSaveParams();return i.request(t.method,t.path,t.body,e).then((function(t){var e=t._status;delete t._status,h._handleSaveResponse(t,e)}),(function(t){return h._handleSaveError(),j.default.reject(t)}))})).then((0,T.default)(ht().mark((function e(){return ht().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._updateLocalIdForObject(d,t);case 2:return e.next=4,n._updateObjectIfPinned(t);case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)}))),(function(t){return j.default.reject(t)}))}return j.default.resolve()}};z.default.setObjectController(kt);var Ot=wt;e.default=Ot}}]);