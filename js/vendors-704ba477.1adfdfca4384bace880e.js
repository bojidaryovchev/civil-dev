"use strict";(self.webpackChunkcivil_dev=self.webpackChunkcivil_dev||[]).push([[734],{77733:(e,t,a)=>{var n=a(60530),l=a(63978),r=a(1068);l(t,"__esModule",{value:!0}),t.UnsetOp=t.SetOp=t.RemoveOp=t.RelationOp=t.Op=t.IncrementOp=t.AddUniqueOp=t.AddOp=void 0,t.opFromJSON=function(e){if(!e||!e.__op)return null;switch(e.__op){case"Delete":return new A;case"Increment":return new j(e.amount);case"Add":return new E((0,g.default)(e.objects));case"AddUnique":return new I((0,g.default)(e.objects));case"Remove":return new S((0,g.default)(e.objects));case"AddRelation":var t=(0,g.default)(e.objects);return(0,w.default)(t)?new J(t,[]):new J([],[]);case"RemoveRelation":var a=(0,g.default)(e.objects);return(0,w.default)(a)?new J([],a):new J([],[]);case"Batch":for(var n=[],l=[],r=0;r<e.ops.length;r++)"AddRelation"===e.ops[r].__op?n=(0,m.default)(n).call(n,(0,g.default)(e.ops[r].objects)):"RemoveRelation"===e.ops[r].__op&&(l=(0,m.default)(l).call(l,(0,g.default)(e.ops[r].objects)));return new J(n,l)}return null};var u=n(a(2991)),o=n(a(92762)),i=n(a(81643)),f=n(a(78914)),s=n(a(5824)),d=n(a(51379)),c=n(a(214)),v=n(a(66380)),h=n(a(87672)),p=n(a(26394)),_=n(a(69198)),m=n(a(77766)),w=n(a(41511)),y=n(a(19218)),g=n(a(80825)),O=n(a(27504)),N=n(a(48205)),C=n(a(32609)),T=n(a(77831));function k(e){var t=function(){if("undefined"==typeof Reflect||!r)return!1;if(r.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(r(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,v.default)(e);if(t){var l=(0,v.default)(this).constructor;a=r(n,arguments,l)}else a=n.apply(this,arguments);return(0,c.default)(this,a)}}var R=function(){function e(){(0,p.default)(this,e)}return(0,_.default)(e,[{key:"applyTo",value:function(){}},{key:"mergeWith",value:function(){}},{key:"toJSON",value:function(){}}]),e}();t.Op=R;var b=function(e){(0,d.default)(a,e);var t=k(a);function a(e){var n;return(0,p.default)(this,a),n=t.call(this),(0,h.default)((0,s.default)(n),"_value",void 0),n._value=e,n}return(0,_.default)(a,[{key:"applyTo",value:function(){return this._value}},{key:"mergeWith",value:function(){return new a(this._value)}},{key:"toJSON",value:function(e){return(0,O.default)(this._value,!1,!0,void 0,e)}}]),a}(R);t.SetOp=b;var A=function(e){(0,d.default)(a,e);var t=k(a);function a(){return(0,p.default)(this,a),t.apply(this,arguments)}return(0,_.default)(a,[{key:"applyTo",value:function(){}},{key:"mergeWith",value:function(){return new a}},{key:"toJSON",value:function(){return{__op:"Delete"}}}]),a}(R);t.UnsetOp=A;var j=function(e){(0,d.default)(a,e);var t=k(a);function a(e){var n;if((0,p.default)(this,a),n=t.call(this),(0,h.default)((0,s.default)(n),"_amount",void 0),"number"!=typeof e)throw new TypeError("Increment Op must be initialized with a numeric amount.");return n._amount=e,n}return(0,_.default)(a,[{key:"applyTo",value:function(e){if(void 0===e)return this._amount;if("number"!=typeof e)throw new TypeError("Cannot increment a non-numeric value.");return this._amount+e}},{key:"mergeWith",value:function(e){if(!e)return this;if(e instanceof b)return new b(this.applyTo(e._value));if(e instanceof A)return new b(this._amount);if(e instanceof a)return new a(this.applyTo(e._amount));throw new Error("Cannot merge Increment Op with the previous Op")}},{key:"toJSON",value:function(){return{__op:"Increment",amount:this._amount}}}]),a}(R);t.IncrementOp=j;var E=function(e){(0,d.default)(a,e);var t=k(a);function a(e){var n;return(0,p.default)(this,a),n=t.call(this),(0,h.default)((0,s.default)(n),"_value",void 0),n._value=(0,w.default)(e)?e:[e],n}return(0,_.default)(a,[{key:"applyTo",value:function(e){if(null==e)return this._value;if((0,w.default)(e))return(0,m.default)(e).call(e,this._value);throw new Error("Cannot add elements to a non-array value")}},{key:"mergeWith",value:function(e){if(!e)return this;if(e instanceof b)return new b(this.applyTo(e._value));if(e instanceof A)return new b(this._value);if(e instanceof a)return new a(this.applyTo(e._value));throw new Error("Cannot merge Add Op with the previous Op")}},{key:"toJSON",value:function(){return{__op:"Add",objects:(0,O.default)(this._value,!1,!0)}}}]),a}(R);t.AddOp=E;var I=function(e){(0,d.default)(a,e);var t=k(a);function a(e){var n;return(0,p.default)(this,a),n=t.call(this),(0,h.default)((0,s.default)(n),"_value",void 0),n._value=(0,T.default)((0,w.default)(e)?e:[e]),n}return(0,_.default)(a,[{key:"applyTo",value:function(e){if(null==e)return this._value||[];if((0,w.default)(e)){var t,a=[];return(0,f.default)(t=this._value).call(t,(function(t){t instanceof N.default?(0,y.default)(e,t)||a.push(t):(0,i.default)(e).call(e,t)<0&&a.push(t)})),(0,m.default)(e).call(e,a)}throw new Error("Cannot add elements to a non-array value")}},{key:"mergeWith",value:function(e){if(!e)return this;if(e instanceof b)return new b(this.applyTo(e._value));if(e instanceof A)return new b(this._value);if(e instanceof a)return new a(this.applyTo(e._value));throw new Error("Cannot merge AddUnique Op with the previous Op")}},{key:"toJSON",value:function(){return{__op:"AddUnique",objects:(0,O.default)(this._value,!1,!0)}}}]),a}(R);t.AddUniqueOp=I;var S=function(e){(0,d.default)(a,e);var t=k(a);function a(e){var n;return(0,p.default)(this,a),n=t.call(this),(0,h.default)((0,s.default)(n),"_value",void 0),n._value=(0,T.default)((0,w.default)(e)?e:[e]),n}return(0,_.default)(a,[{key:"applyTo",value:function(e){if(null==e)return[];if((0,w.default)(e)){for(var t=(0,m.default)(e).call(e,[]),a=0;a<this._value.length;a++){for(var n=(0,i.default)(t).call(t,this._value[a]);n>-1;)(0,o.default)(t).call(t,n,1),n=(0,i.default)(t).call(t,this._value[a]);if(this._value[a]instanceof N.default&&this._value[a].id)for(var l=0;l<t.length;l++)t[l]instanceof N.default&&this._value[a].id===t[l].id&&((0,o.default)(t).call(t,l,1),l--)}return t}throw new Error("Cannot remove elements from a non-array value")}},{key:"mergeWith",value:function(e){if(!e)return this;if(e instanceof b)return new b(this.applyTo(e._value));if(e instanceof A)return new A;if(e instanceof a){for(var t,n=(0,m.default)(t=e._value).call(t,[]),l=0;l<this._value.length;l++)this._value[l]instanceof N.default?(0,y.default)(n,this._value[l])||n.push(this._value[l]):(0,i.default)(n).call(n,this._value[l])<0&&n.push(this._value[l]);return new a(n)}throw new Error("Cannot merge Remove Op with the previous Op")}},{key:"toJSON",value:function(){return{__op:"Remove",objects:(0,O.default)(this._value,!1,!0)}}}]),a}(R);t.RemoveOp=S;var J=function(e){(0,d.default)(a,e);var t=k(a);function a(e,n){var l;return(0,p.default)(this,a),l=t.call(this),(0,h.default)((0,s.default)(l),"_targetClassName",void 0),(0,h.default)((0,s.default)(l),"relationsToAdd",void 0),(0,h.default)((0,s.default)(l),"relationsToRemove",void 0),l._targetClassName=null,(0,w.default)(e)&&(l.relationsToAdd=(0,T.default)((0,u.default)(e).call(e,l._extractId,(0,s.default)(l)))),(0,w.default)(n)&&(l.relationsToRemove=(0,T.default)((0,u.default)(n).call(n,l._extractId,(0,s.default)(l)))),l}return(0,_.default)(a,[{key:"_extractId",value:function(e){if("string"==typeof e)return e;if(!e.id)throw new Error("You cannot add or remove an unsaved Parse Object from a relation");if(this._targetClassName||(this._targetClassName=e.className),this._targetClassName!==e.className)throw new Error("Tried to create a Relation with 2 different object types: "+this._targetClassName+" and "+e.className+".");return e.id}},{key:"applyTo",value:function(e,t,a){if(!e){var n;if(!t||!a)throw new Error("Cannot apply a RelationOp without either a previous value, or an object and a key");var l=new N.default(t.className);t.id&&0===(0,i.default)(n=t.id).call(n,"local")?l._localId=t.id:t.id&&(l.id=t.id);var r=new C.default(l,a);return r.targetClassName=this._targetClassName,r}if(e instanceof C.default){if(this._targetClassName)if(e.targetClassName){if(this._targetClassName!==e.targetClassName)throw new Error("Related object must be a "+e.targetClassName+", but a "+this._targetClassName+" was passed in.")}else e.targetClassName=this._targetClassName;return e}throw new Error("Relation cannot be applied to a non-relation field")}},{key:"mergeWith",value:function(e){if(!e)return this;if(e instanceof A)throw new Error("You cannot modify a relation after deleting it.");if(e instanceof b&&e._value instanceof C.default)return this;if(e instanceof a){var t,n,l,r,u,s;if(e._targetClassName&&e._targetClassName!==this._targetClassName)throw new Error("Related object must be of class "+e._targetClassName+", but "+(this._targetClassName||"null")+" was passed in.");var d=(0,m.default)(t=e.relationsToAdd).call(t,[]);(0,f.default)(n=this.relationsToRemove).call(n,(function(e){var t=(0,i.default)(d).call(d,e);t>-1&&(0,o.default)(d).call(d,t,1)})),(0,f.default)(l=this.relationsToAdd).call(l,(function(e){(0,i.default)(d).call(d,e)<0&&d.push(e)}));var c=(0,m.default)(r=e.relationsToRemove).call(r,[]);(0,f.default)(u=this.relationsToAdd).call(u,(function(e){var t=(0,i.default)(c).call(c,e);t>-1&&(0,o.default)(c).call(c,t,1)})),(0,f.default)(s=this.relationsToRemove).call(s,(function(e){(0,i.default)(c).call(c,e)<0&&c.push(e)}));var v=new a(d,c);return v._targetClassName=this._targetClassName,v}throw new Error("Cannot merge Relation Op with the previous Op")}},{key:"toJSON",value:function(){var e,t,a=this,n=function(e){return{__type:"Pointer",className:a._targetClassName,objectId:e}},l=null,r=null;this.relationsToAdd.length>0&&(l={__op:"AddRelation",objects:(0,u.default)(e=this.relationsToAdd).call(e,n)});this.relationsToRemove.length>0&&(r={__op:"RemoveRelation",objects:(0,u.default)(t=this.relationsToRemove).call(t,n)});return l&&r?{__op:"Batch",ops:[l,r]}:l||r||{}}}]),a}(R);t.RelationOp=J}}]);