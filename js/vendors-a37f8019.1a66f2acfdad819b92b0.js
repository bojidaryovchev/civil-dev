/*! For license information please see vendors-a37f8019.1a66f2acfdad819b92b0.js.LICENSE.txt */
"use strict";(self.webpackChunkcivil_dev=self.webpackChunkcivil_dev||[]).push([[305],{4603:(e,t,r)=>{var n=r(60530),a=r(34074),i=r(63978),o=r(23765),u=r(52424),s=n(r(93476)),l=n(r(80825)),c=n(r(27504)),f=n(r(79128)),d=n(r(6298)),h=n(r(12889)),v=n(r(38315)),y=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=g(t);if(r&&r.has(e))return r.get(e);var n={};for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var s=i&&a?a(e,u):null;s&&(s.get||s.set)?i(n,u,s):n[u]=e[u]}n.default=e,r&&r.set(e,n);return n}(r(77733)),p=n(r(23201));function g(e){if("function"!=typeof u)return null;var t=new u,r=new u;return(g=function(e){return e?r:t})(e)}var _={initialize:function(e,t){f.default.get("IS_NODE")&&!"MISSING_ENV_VAR".SERVER_RENDERING&&console.log("It looks like you're using the browser version of the SDK in a node.js environment. You should require('parse/node') instead."),_._initialize(e,t)},_initialize:function(e,t,r){f.default.set("APPLICATION_ID",e),f.default.set("JAVASCRIPT_KEY",t),f.default.set("MASTER_KEY",r),f.default.set("USE_MASTER_KEY",!1)},setAsyncStorage:function(e){f.default.setAsyncStorage(e)},setLocalDatastoreController:function(e){f.default.setLocalDatastoreController(e)},getServerHealth:function(){return f.default.getRESTController().request("GET","health")},set applicationId(e){f.default.set("APPLICATION_ID",e)},get applicationId(){return f.default.get("APPLICATION_ID")},set javaScriptKey(e){f.default.set("JAVASCRIPT_KEY",e)},get javaScriptKey(){return f.default.get("JAVASCRIPT_KEY")},set masterKey(e){f.default.set("MASTER_KEY",e)},get masterKey(){return f.default.get("MASTER_KEY")},set serverURL(e){f.default.set("SERVER_URL",e)},get serverURL(){return f.default.get("SERVER_URL")},set serverAuthToken(e){f.default.set("SERVER_AUTH_TOKEN",e)},get serverAuthToken(){return f.default.get("SERVER_AUTH_TOKEN")},set serverAuthType(e){f.default.set("SERVER_AUTH_TYPE",e)},get serverAuthType(){return f.default.get("SERVER_AUTH_TYPE")},set liveQueryServerURL(e){f.default.set("LIVEQUERY_SERVER_URL",e)},get liveQueryServerURL(){return f.default.get("LIVEQUERY_SERVER_URL")},set encryptedUser(e){f.default.set("ENCRYPTED_USER",e)},get encryptedUser(){return f.default.get("ENCRYPTED_USER")},set secret(e){f.default.set("ENCRYPTED_KEY",e)},get secret(){return f.default.get("ENCRYPTED_KEY")},set idempotency(e){f.default.set("IDEMPOTENCY",e)},get idempotency(){return f.default.get("IDEMPOTENCY")},set allowCustomObjectId(e){f.default.set("ALLOW_CUSTOM_OBJECT_ID",e)},get allowCustomObjectId(){return f.default.get("ALLOW_CUSTOM_OBJECT_ID")}};_.ACL=r(76102).default,_.Analytics=r(80974),_.AnonymousUtils=r(45973).default,_.Cloud=r(91067),_.CLP=r(51104).default,_.CoreManager=r(79128),_.Config=r(74793).default,_.Error=r(44820).default,_.EventuallyQueue=h.default,_.FacebookUtils=r(80910).default,_.File=r(76987).default,_.GeoPoint=r(78483).default,_.Polygon=r(51591).default,_.Installation=r(38455).default,_.LocalDatastore=r(9582),_.Object=r(48205).default,_.Op={Set:y.SetOp,Unset:y.UnsetOp,Increment:y.IncrementOp,Add:y.AddOp,Remove:y.RemoveOp,AddUnique:y.AddUniqueOp,Relation:y.RelationOp},_.Push=r(92390),_.Query=r(35146).default,_.Relation=r(32609).default,_.Role=r(55778).default,_.Schema=r(98774).default,_.Session=r(99388).default,_.Storage=r(1031),_.User=r(15384).default,_.LiveQuery=r(12181).default,_.LiveQueryClient=r(43933).default,_.IndexedDB=r(17155),_._request=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return f.default.getRESTController().request.apply(null,t)},_._ajax=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return f.default.getRESTController().ajax.apply(null,t)},_._decode=function(e,t){return(0,l.default)(t)},_._encode=function(e,t,r){return(0,c.default)(e,r)},_._getInstallationId=function(){return f.default.getInstallationController().currentInstallationId()},_.enableLocalDatastore=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3;_.applicationId?_.LocalDatastore.isEnabled||(_.LocalDatastore.isEnabled=!0,e&&h.default.poll(t)):console.log("'enableLocalDataStore' must be called after 'initialize'")},_.isLocalDatastoreEnabled=function(){return _.LocalDatastore.isEnabled},_.dumpLocalDatastore=function(){return _.LocalDatastore.isEnabled?_.LocalDatastore._getAllContents():(console.log("Parse.enableLocalDatastore() must be called first"),s.default.resolve({}))},_.enableEncryptedUser=function(){_.encryptedUser=!0},_.isEncryptedUserEnabled=function(){return _.encryptedUser},f.default.setCryptoController(d.default),f.default.setInstallationController(v.default),f.default.setRESTController(p.default),_.Parse=_,e.exports=_},51591:(e,t,r)=>{var n=r(60530);r(63978)(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(41511)),i=n(r(26394)),o=n(r(69198)),u=n(r(87672)),s=n(r(78483)),l=function(){function e(t){(0,i.default)(this,e),(0,u.default)(this,"_coordinates",void 0),this._coordinates=e._validate(t)}return(0,o.default)(e,[{key:"coordinates",get:function(){return this._coordinates},set:function(t){this._coordinates=e._validate(t)}},{key:"toJSON",value:function(){return e._validate(this._coordinates),{__type:"Polygon",coordinates:this._coordinates}}},{key:"equals",value:function(t){if(!(t instanceof e)||this.coordinates.length!==t.coordinates.length)return!1;for(var r=!0,n=1;n<this._coordinates.length;n+=1)if(this._coordinates[n][0]!=t.coordinates[n][0]||this._coordinates[n][1]!=t.coordinates[n][1]){r=!1;break}return r}},{key:"containsPoint",value:function(e){for(var t=this._coordinates[0][0],r=this._coordinates[0][0],n=this._coordinates[0][1],a=this._coordinates[0][1],i=1;i<this._coordinates.length;i+=1){var o=this._coordinates[i];t=Math.min(o[0],t),r=Math.max(o[0],r),n=Math.min(o[1],n),a=Math.max(o[1],a)}if(e.latitude<t||e.latitude>r||e.longitude<n||e.longitude>a)return!1;for(var u=!1,s=0,l=this._coordinates.length-1;s<this._coordinates.length;l=s++){var c=this._coordinates[s][0],f=this._coordinates[s][1],d=this._coordinates[l][0],h=this._coordinates[l][1];f>e.longitude!=h>e.longitude&&e.latitude<(d-c)*(e.longitude-f)/(h-f)+c&&(u=!u)}return u}}],[{key:"_validate",value:function(e){if(!(0,a.default)(e))throw new TypeError("Coordinates must be an Array");if(e.length<3)throw new TypeError("Polygon must have at least 3 GeoPoints or Points");for(var t=[],r=0;r<e.length;r+=1){var n=e[r],i=void 0;if(n instanceof s.default)i=n;else{if(!(0,a.default)(n)||2!==n.length)throw new TypeError("Coordinates must be an Array of GeoPoints or Points");i=new s.default(n[0],n[1])}t.push([i.latitude,i.longitude])}return t}}]),e}();t.default=l},35146:(e,t,r)=>{var n=r(60530),a=r(3649),i=r(97093),o=r(93476),u=r(85507),s=r(23765),l=r(78914),c=r(21611),f=r(54943),d=r(63978),h=r(65420);d(t,"__esModule",{value:!0}),t.default=void 0;var v=n(r(26295)),y=n(r(18777)),p=n(r(41511)),g=n(r(59036)),_=n(r(94473)),m=n(r(93476)),w=n(r(92762)),k=n(r(47302)),E=n(r(78580)),b=n(r(77766)),x=n(r(69301)),C=n(r(20116)),T=n(r(51161)),S=n(r(2991)),P=n(r(26394)),N=n(r(69198)),R=n(r(87672)),O=n(r(3649)),A=n(r(86902)),U=n(r(23765)),L=n(r(81643)),I=n(r(78914)),D=n(r(79128)),j=n(r(27504)),q=r(35430),M=n(r(44820)),K=n(r(78483)),F=n(r(48205)),$=n(r(96901)),Y=r(43408);function J(){J=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof h?h:{},v=n.iterator||"@@iterator",y=n.asyncIterator||"@@asyncIterator",p=n.toStringTag||"@@toStringTag";function g(e,t,r){return d(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{g({},"")}catch(e){g=function(e,t,r){return e[t]=r}}function _(e,t,r,n){var a=t&&t.prototype instanceof k?t:k,i=f(a.prototype),o=new A(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(a,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw i;return L()}for(r.method=a,r.arg=i;;){var o=r.delegate;if(o){var u=N(o,r);if(u){if(u===w)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=m(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===w)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}(e,r,o),i}function m(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=_;var w={};function k(){}function E(){}function b(){}var x={};g(x,v,(function(){return this}));var C=c&&c(c(U([])));C&&C!==t&&r.call(C,v)&&(x=C);var T=b.prototype=k.prototype=f(x);function S(e){var t;l(t=["next","throw","return"]).call(t,(function(t){g(e,t,(function(e){return this._invoke(t,e)}))}))}function P(e,t){function n(a,i,o,u){var l=m(e[a],e,i);if("throw"!==l.type){var c=l.arg,f=c.value;return f&&"object"==s(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,o,u)}),(function(e){n("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,u)}))}u(l.arg)}var a;this._invoke=function(e,r){function i(){return new t((function(t,a){n(e,r,t,a)}))}return a=a?a.then(i,i):i()}}function N(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,N(e,t),"throw"===t.method))return w;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return w}var n=m(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,w;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,w):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,w)}function R(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],l(e).call(e,R,this),this.reset(!0)}function U(e){if(e){var t=e[v];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:L}}function L(){return{value:void 0,done:!0}}return E.prototype=b,g(T,"constructor",b),g(b,"constructor",E),E.displayName=g(b,p,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===E||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return u?u(e,b):(e.__proto__=b,g(e,p,"GeneratorFunction")),e.prototype=f(T),e},e.awrap=function(e){return{__await:e}},S(P.prototype),g(P.prototype,y,(function(){return this})),e.AsyncIterator=P,e.async=function(t,r,n,a,i){void 0===i&&(i=o);var u=new P(_(t,r,n,a),i);return e.isGeneratorFunction(r)?u:u.next().then((function(e){return e.done?e.value:u.next()}))},S(T),g(T,p,"Generator"),g(T,v,(function(){return this})),g(T,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return i(t).call(t),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=U,A.prototype={constructor:A,reset:function(e){var t;if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,l(t=this.tryEntries).call(t,O),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+a(n).call(n,1))&&(this[n]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return o.type="throw",o.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,w):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),w},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),w}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;O(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:U(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),w}},e}function Q(e){return"\\Q"+e.replace("\\E","\\E\\\\E\\Q")+"\\E"}function G(e){var t=null;return(0,I.default)(e).call(e,(function(e){if(t||(t=e.className),t!==e.className)throw new Error("All queries must be for the same class.")})),t}function W(e,t){var r={};((0,I.default)(t).call(t,(function(t){var n=-1!==(0,L.default)(t).call(t,".");if(n||e.hasOwnProperty(t)){if(n){var a=t.split("."),i=e,o=r;(0,I.default)(a).call(a,(function(e,t,r){i&&!i.hasOwnProperty(e)&&(i[e]=void 0),i&&"object"===(0,U.default)(i)&&(i=i[e]),t<r.length-1&&(o[e]||(o[e]={}),o=o[e])}))}}else e[t]=void 0})),(0,A.default)(r).length>0)&&V(D.default.getObjectStateController().getServerData({id:e.objectId,className:e.className}),e,r,!1)}function V(e,t,r,n){if(n)for(var a in e)e.hasOwnProperty(a)&&!t.hasOwnProperty(a)&&(t[a]=e[a]);for(var i in r)void 0!==t[i]&&null!==t[i]&&null!=e&&V(e[i],t[i],r[i],!0)}function B(e,t,r){var n=r[0],a="-"===(0,O.default)(n).call(n,0,1);if(a&&(n=n.substring(1)),"_created_at"===n&&(n="createdAt"),"_updated_at"===n&&(n="updatedAt"),!/^[A-Za-z][0-9A-Za-z_]*$/.test(n)||"password"===n)throw new M.default(M.default.INVALID_KEY_NAME,"Invalid Key: ".concat(n));var i=e.get(n),o=t.get(n);return i<o?a?1:-1:i>o?a?-1:1:r.length>1?B(e,t,(0,O.default)(r).call(r,1)):0}var z=function(){function e(t){if((0,P.default)(this,e),(0,R.default)(this,"className",void 0),(0,R.default)(this,"_where",void 0),(0,R.default)(this,"_include",void 0),(0,R.default)(this,"_exclude",void 0),(0,R.default)(this,"_select",void 0),(0,R.default)(this,"_limit",void 0),(0,R.default)(this,"_skip",void 0),(0,R.default)(this,"_count",void 0),(0,R.default)(this,"_order",void 0),(0,R.default)(this,"_readPreference",void 0),(0,R.default)(this,"_includeReadPreference",void 0),(0,R.default)(this,"_subqueryReadPreference",void 0),(0,R.default)(this,"_queriesLocalDatastore",void 0),(0,R.default)(this,"_localDatastorePinName",void 0),(0,R.default)(this,"_extraOptions",void 0),(0,R.default)(this,"_hint",void 0),(0,R.default)(this,"_explain",void 0),(0,R.default)(this,"_xhrRequest",void 0),"string"==typeof t)"User"===t&&D.default.get("PERFORM_USER_REWRITE")?this.className="_User":this.className=t;else if(t instanceof F.default)this.className=t.className;else{if("function"!=typeof t)throw new TypeError("A ParseQuery must be constructed with a ParseObject or class name.");if("string"==typeof t.className)this.className=t.className;else{var r=new t;this.className=r.className}}this._where={},this._include=[],this._exclude=[],this._count=!1,this._limit=-1,this._skip=0,this._readPreference=null,this._includeReadPreference=null,this._subqueryReadPreference=null,this._queriesLocalDatastore=!1,this._localDatastorePinName=null,this._extraOptions={},this._xhrRequest={task:null,onchange:function(){}}}var t,r,n,a,i,o;return(0,N.default)(e,[{key:"_orQuery",value:function(e){var t=(0,S.default)(e).call(e,(function(e){return e.toJSON().where}));return this._where.$or=t,this}},{key:"_andQuery",value:function(e){var t=(0,S.default)(e).call(e,(function(e){return e.toJSON().where}));return this._where.$and=t,this}},{key:"_norQuery",value:function(e){var t=(0,S.default)(e).call(e,(function(e){return e.toJSON().where}));return this._where.$nor=t,this}},{key:"_addCondition",value:function(e,t,r){return this._where[e]&&"string"!=typeof this._where[e]||(this._where[e]={}),this._where[e][t]=(0,j.default)(r,!1,!0),this}},{key:"_regexStartWith",value:function(e){return"^"+Q(e)}},{key:"_handleOfflineQuery",value:(o=(0,T.default)(J().mark((function e(t){var r,n,a,i,o,u,s,l,c,f=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $.default.validateQuery(this),n=D.default.getLocalDatastore(),e.next=4,n._serializeObjectsFromPinName(this._localDatastorePinName);case 4:if(a=e.sent,i=(0,C.default)(r=(0,S.default)(a).call(a,(function(e,t,r){var n=F.default.fromJSON(e,!1);return e._localId&&!e.objectId&&(n._localId=e._localId),$.default.matchesQuery(f.className,n,r,f)?n:null}))).call(r,(function(e){return null!==e})),(0,x.default)(t)&&(o=(0,x.default)(t).split(","),u=["className","objectId","createdAt","updatedAt","ACL"],o=(0,b.default)(o).call(o,u),i=(0,S.default)(i).call(i,(function(e){var t,r=e._toFullJSON();return(0,I.default)(t=(0,A.default)(r)).call(t,(function(e){(0,E.default)(o).call(o,e)||delete r[e]})),F.default.fromJSON(r,!1)}))),t.order&&(s=t.order.split(","),(0,k.default)(i).call(i,(function(e,t){return B(e,t,s)}))),t.count&&(l=i.length),t.skip&&(i=t.skip>=i.length?[]:(0,w.default)(i).call(i,t.skip,i.length)),c=i.length,0!==t.limit&&t.limit<i.length&&(c=t.limit),i=(0,w.default)(i).call(i,0,c),"number"!=typeof l){e.next=15;break}return e.abrupt("return",{results:i,count:l});case 15:return e.abrupt("return",i);case 16:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"toJSON",value:function(){var e={where:this._where};for(var t in this._include.length&&(e.include=this._include.join(",")),this._exclude.length&&(e.excludeKeys=this._exclude.join(",")),this._select&&(e.keys=this._select.join(",")),this._count&&(e.count=1),this._limit>=0&&(e.limit=this._limit),this._skip>0&&(e.skip=this._skip),this._order&&(e.order=this._order.join(",")),this._readPreference&&(e.readPreference=this._readPreference),this._includeReadPreference&&(e.includeReadPreference=this._includeReadPreference),this._subqueryReadPreference&&(e.subqueryReadPreference=this._subqueryReadPreference),this._hint&&(e.hint=this._hint),this._explain&&(e.explain=!0),this._extraOptions)e[t]=this._extraOptions[t];return e}},{key:"withJSON",value:function(e){for(var t in e.where&&(this._where=e.where),e.include&&(this._include=e.include.split(",")),(0,x.default)(e)&&(this._select=(0,x.default)(e).split(",")),e.excludeKeys&&(this._exclude=e.excludeKeys.split(",")),e.count&&(this._count=1===e.count),e.limit&&(this._limit=e.limit),e.skip&&(this._skip=e.skip),e.order&&(this._order=e.order.split(",")),e.readPreference&&(this._readPreference=e.readPreference),e.includeReadPreference&&(this._includeReadPreference=e.includeReadPreference),e.subqueryReadPreference&&(this._subqueryReadPreference=e.subqueryReadPreference),e.hint&&(this._hint=e.hint),e.explain&&(this._explain=!!e.explain),e){var r;if(e.hasOwnProperty(t))-1===(0,L.default)(r=["where","include","keys","count","limit","skip","order","readPreference","includeReadPreference","subqueryReadPreference","hint","explain"]).call(r,t)&&(this._extraOptions[t]=e[t])}return this}},{key:"get",value:function(e,t){this.equalTo("objectId",e);var r={};return t&&t.hasOwnProperty("useMasterKey")&&(r.useMasterKey=t.useMasterKey),t&&t.hasOwnProperty("sessionToken")&&(r.sessionToken=t.sessionToken),t&&t.hasOwnProperty("context")&&"object"===(0,U.default)(t.context)&&(r.context=t.context),t&&t.hasOwnProperty("json")&&(r.json=t.json),this.first(r).then((function(e){if(e)return e;var t=new M.default(M.default.OBJECT_NOT_FOUND,"Object not found.");return m.default.reject(t)}))}},{key:"find",value:function(e){var t=this,r={};(e=e||{}).hasOwnProperty("useMasterKey")&&(r.useMasterKey=e.useMasterKey),e.hasOwnProperty("sessionToken")&&(r.sessionToken=e.sessionToken),e.hasOwnProperty("context")&&"object"===(0,U.default)(e.context)&&(r.context=e.context),this._setRequestTask(r);var n=D.default.getQueryController(),a=this._select;return this._queriesLocalDatastore?this._handleOfflineQuery(this.toJSON()):(0,_.default)(n).call(n,this.className,this.toJSON(),r).then((function(r){var n;if(t._explain)return r.results;var i=(0,S.default)(n=r.results).call(n,(function(n){var i=r.className||t.className;return n.className||(n.className=i),a&&W(n,a),e.json?n:F.default.fromJSON(n,!a)})),o=r.count;return"number"==typeof o?{results:i,count:o}:i}))}},{key:"findAll",value:(i=(0,T.default)(J().mark((function e(t){var r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],e.next=3,this.eachBatch((function(e){var t;r=(0,b.default)(t=[]).call(t,(0,g.default)(r),(0,g.default)(e))}),t);case 3:return e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"count",value:function(e){var t={};(e=e||{}).hasOwnProperty("useMasterKey")&&(t.useMasterKey=e.useMasterKey),e.hasOwnProperty("sessionToken")&&(t.sessionToken=e.sessionToken),this._setRequestTask(t);var r=D.default.getQueryController(),n=this.toJSON();return n.limit=0,n.count=1,(0,_.default)(r).call(r,this.className,n,t).then((function(e){return e.count}))}},{key:"distinct",value:function(e,t){var r={useMasterKey:!0};(t=t||{}).hasOwnProperty("sessionToken")&&(r.sessionToken=t.sessionToken),this._setRequestTask(r);var n=D.default.getQueryController(),a={distinct:e,where:this._where,hint:this._hint};return n.aggregate(this.className,a,r).then((function(e){return e.results}))}},{key:"aggregate",value:function(e,t){var r={useMasterKey:!0};(t=t||{}).hasOwnProperty("sessionToken")&&(r.sessionToken=t.sessionToken),this._setRequestTask(r);var n=D.default.getQueryController();if(!(0,p.default)(e)&&"object"!==(0,U.default)(e))throw new Error("Invalid pipeline must be Array or Object");(0,A.default)(this._where||{}).length&&((0,p.default)(e)||(e=[e]),e.unshift({$match:this._where}));var a={pipeline:e,hint:this._hint,explain:this._explain,readPreference:this._readPreference};return n.aggregate(this.className,a,r).then((function(e){return e.results}))}},{key:"first",value:function(e){var t=this,r={};(e=e||{}).hasOwnProperty("useMasterKey")&&(r.useMasterKey=e.useMasterKey),e.hasOwnProperty("sessionToken")&&(r.sessionToken=e.sessionToken),e.hasOwnProperty("context")&&"object"===(0,U.default)(e.context)&&(r.context=e.context),this._setRequestTask(r);var n=D.default.getQueryController(),a=this.toJSON();a.limit=1;var i=this._select;return this._queriesLocalDatastore?this._handleOfflineQuery(a).then((function(e){if(e[0])return e[0]})):(0,_.default)(n).call(n,this.className,a,r).then((function(r){var n=r.results;if(n[0])return n[0].className||(n[0].className=t.className),i&&W(n[0],i),e.json?n[0]:F.default.fromJSON(n[0],!i)}))}},{key:"eachBatch",value:function(t,r){var n;if(r=r||{},this._order||this._skip||this._limit>=0){return m.default.reject("Cannot iterate on a query with sort, skip, or limit.")}var a,i=new e(this.className);(i._limit=r.batchSize||100,i._include=(0,S.default)(n=this._include).call(n,(function(e){return e})),this._select)&&(i._select=(0,S.default)(a=this._select).call(a,(function(e){return e})));for(var o in i._hint=this._hint,i._where={},this._where){var u=this._where[o];if((0,p.default)(u))i._where[o]=(0,S.default)(u).call(u,(function(e){return e}));else if(u&&"object"===(0,U.default)(u)){var s={};for(var l in i._where[o]=s,u)s[l]=u[l]}else i._where[o]=u}i.ascending("objectId");var c={};r.hasOwnProperty("useMasterKey")&&(c.useMasterKey=r.useMasterKey),r.hasOwnProperty("sessionToken")&&(c.sessionToken=r.sessionToken),r.hasOwnProperty("context")&&"object"===(0,U.default)(r.context)&&(c.context=r.context),r.hasOwnProperty("json")&&(c.json=r.json);var f=!1,d=[];return(0,q.continueWhile)((function(){return!f}),(0,T.default)(J().mark((function e(){var r,n,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.default.all([(0,_.default)(i).call(i,c),m.default.resolve(d.length>0&&t(d))]);case 2:if(r=e.sent,n=(0,y.default)(r,1),!((a=n[0]).length>=i._limit)){e.next=10;break}i.greaterThan("objectId",a[a.length-1].id),d=a,e.next=17;break;case 10:if(!(a.length>0)){e.next=16;break}return e.next=13,m.default.resolve(t(a));case 13:f=!0,e.next=17;break;case 16:f=!0;case 17:case"end":return e.stop()}}),e)}))))}},{key:"each",value:function(e,t){return this.eachBatch((function(t){var r=m.default.resolve();return(0,I.default)(t).call(t,(function(t){r=r.then((function(){return e(t)}))})),r}),t)}},{key:"hint",value:function(e){return void 0===e&&delete this._hint,this._hint=e,this}},{key:"explain",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if("boolean"!=typeof e)throw new Error("You can only set explain to a boolean value");return this._explain=e,this}},{key:"map",value:(a=(0,T.default)(J().mark((function e(t,r){var n,a,i=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],a=0,e.next=4,this.each((function(e){return m.default.resolve(t(e,a,i)).then((function(e){n.push(e),a+=1}))}),r);case 4:return e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"reduce",value:(n=(0,T.default)(J().mark((function e(t,r,n){var a,i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r,i=0,e.next=4,this.each((function(e){return 0===i&&void 0===r?(a=e,void(i+=1)):m.default.resolve(t(a,e,i)).then((function(e){a=e,i+=1}))}),n);case 4:if(0!==i||void 0!==r){e.next=6;break}throw new TypeError("Reducing empty query result set with no initial value");case 6:return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return n.apply(this,arguments)})},{key:"filter",value:(r=(0,T.default)(J().mark((function e(t,r){var n,a,i=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],a=0,e.next=4,this.each((function(e){return m.default.resolve(t(e,a,i)).then((function(t){t&&n.push(e),a+=1}))}),r);case 4:return e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"equalTo",value:function(e,t){var r,n=this;return e&&"object"===(0,U.default)(e)?((0,I.default)(r=(0,v.default)(e)).call(r,(function(e){var t=(0,y.default)(e,2),r=t[0],a=t[1];return n.equalTo(r,a)})),this):void 0===t?this.doesNotExist(e):(this._where[e]=(0,j.default)(t,!1,!0),this)}},{key:"notEqualTo",value:function(e,t){var r,n=this;return e&&"object"===(0,U.default)(e)?((0,I.default)(r=(0,v.default)(e)).call(r,(function(e){var t=(0,y.default)(e,2),r=t[0],a=t[1];return n.notEqualTo(r,a)})),this):this._addCondition(e,"$ne",t)}},{key:"lessThan",value:function(e,t){return this._addCondition(e,"$lt",t)}},{key:"greaterThan",value:function(e,t){return this._addCondition(e,"$gt",t)}},{key:"lessThanOrEqualTo",value:function(e,t){return this._addCondition(e,"$lte",t)}},{key:"greaterThanOrEqualTo",value:function(e,t){return this._addCondition(e,"$gte",t)}},{key:"containedIn",value:function(e,t){return this._addCondition(e,"$in",t)}},{key:"notContainedIn",value:function(e,t){return this._addCondition(e,"$nin",t)}},{key:"containedBy",value:function(e,t){return this._addCondition(e,"$containedBy",t)}},{key:"containsAll",value:function(e,t){return this._addCondition(e,"$all",t)}},{key:"containsAllStartingWith",value:function(e,t){var r=this;(0,p.default)(t)||(t=[t]);var n=(0,S.default)(t).call(t,(function(e){return{$regex:r._regexStartWith(e)}}));return this.containsAll(e,n)}},{key:"exists",value:function(e){return this._addCondition(e,"$exists",!0)}},{key:"doesNotExist",value:function(e){return this._addCondition(e,"$exists",!1)}},{key:"matches",value:function(e,t,r){return this._addCondition(e,"$regex",t),r||(r=""),t.ignoreCase&&(r+="i"),t.multiline&&(r+="m"),r.length&&this._addCondition(e,"$options",r),this}},{key:"matchesQuery",value:function(e,t){var r=t.toJSON();return r.className=t.className,this._addCondition(e,"$inQuery",r)}},{key:"doesNotMatchQuery",value:function(e,t){var r=t.toJSON();return r.className=t.className,this._addCondition(e,"$notInQuery",r)}},{key:"matchesKeyInQuery",value:function(e,t,r){var n=r.toJSON();return n.className=r.className,this._addCondition(e,"$select",{key:t,query:n})}},{key:"doesNotMatchKeyInQuery",value:function(e,t,r){var n=r.toJSON();return n.className=r.className,this._addCondition(e,"$dontSelect",{key:t,query:n})}},{key:"contains",value:function(e,t){if("string"!=typeof t)throw new Error("The value being searched for must be a string.");return this._addCondition(e,"$regex",Q(t))}},{key:"fullText",value:function(e,t,r){if(r=r||{},!e)throw new Error("A key is required.");if(!t)throw new Error("A search term is required");if("string"!=typeof t)throw new Error("The value being searched for must be a string.");var n={};for(var a in n.$term=t,r)switch(a){case"language":n.$language=r[a];break;case"caseSensitive":n.$caseSensitive=r[a];break;case"diacriticSensitive":n.$diacriticSensitive=r[a];break;default:throw new Error("Unknown option: ".concat(a))}return this._addCondition(e,"$text",{$search:n})}},{key:"sortByTextScore",value:function(){return this.ascending("$score"),this.select(["$score"]),this}},{key:"startsWith",value:function(e,t,r){if("string"!=typeof t)throw new Error("The value being searched for must be a string.");return this.matches(e,this._regexStartWith(t),r)}},{key:"endsWith",value:function(e,t,r){if("string"!=typeof t)throw new Error("The value being searched for must be a string.");return this.matches(e,Q(t)+"$",r)}},{key:"near",value:function(e,t){return t instanceof K.default||(t=new K.default(t)),this._addCondition(e,"$nearSphere",t)}},{key:"withinRadians",value:function(e,t,r,n){return n||void 0===n?(this.near(e,t),this._addCondition(e,"$maxDistance",r)):this._addCondition(e,"$geoWithin",{$centerSphere:[[t.longitude,t.latitude],r]})}},{key:"withinMiles",value:function(e,t,r,n){return this.withinRadians(e,t,r/3958.8,n)}},{key:"withinKilometers",value:function(e,t,r,n){return this.withinRadians(e,t,r/6371,n)}},{key:"withinGeoBox",value:function(e,t,r){return t instanceof K.default||(t=new K.default(t)),r instanceof K.default||(r=new K.default(r)),this._addCondition(e,"$within",{$box:[t,r]}),this}},{key:"withinPolygon",value:function(e,t){return this._addCondition(e,"$geoWithin",{$polygon:t})}},{key:"polygonContains",value:function(e,t){return this._addCondition(e,"$geoIntersects",{$point:t})}},{key:"ascending",value:function(){this._order=[];for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.addAscending.apply(this,t)}},{key:"addAscending",value:function(){var e=this;this._order||(this._order=[]);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(0,I.default)(r).call(r,(function(t){var r;(0,p.default)(t)&&(t=t.join()),e._order=(0,b.default)(r=e._order).call(r,t.replace(/\s/g,"").split(","))})),this}},{key:"descending",value:function(){this._order=[];for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.addDescending.apply(this,t)}},{key:"addDescending",value:function(){var e=this;this._order||(this._order=[]);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(0,I.default)(r).call(r,(function(t){var r,n;(0,p.default)(t)&&(t=t.join()),e._order=(0,b.default)(r=e._order).call(r,(0,S.default)(n=t.replace(/\s/g,"").split(",")).call(n,(function(e){return"-"+e})))})),this}},{key:"skip",value:function(e){if("number"!=typeof e||e<0)throw new Error("You can only skip by a positive number");return this._skip=e,this}},{key:"limit",value:function(e){if("number"!=typeof e)throw new Error("You can only set the limit to a numeric value");return this._limit=e,this}},{key:"withCount",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if("boolean"!=typeof e)throw new Error("You can only set withCount to a boolean value");return this._count=e,this}},{key:"include",value:function(){for(var e=this,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(0,I.default)(r).call(r,(function(t){var r;(0,p.default)(t)?e._include=(0,b.default)(r=e._include).call(r,t):e._include.push(t)})),this}},{key:"includeAll",value:function(){return this.include("*")}},{key:"select",value:function(){var e=this;this._select||(this._select=[]);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(0,I.default)(r).call(r,(function(t){var r;(0,p.default)(t)?e._select=(0,b.default)(r=e._select).call(r,t):e._select.push(t)})),this}},{key:"exclude",value:function(){for(var e=this,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(0,I.default)(r).call(r,(function(t){var r;(0,p.default)(t)?e._exclude=(0,b.default)(r=e._exclude).call(r,t):e._exclude.push(t)})),this}},{key:"readPreference",value:function(e,t,r){return this._readPreference=e,this._includeReadPreference=t,this._subqueryReadPreference=r,this}},{key:"subscribe",value:(t=(0,T.default)(J().mark((function e(t){var r,n,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.default.getUserController().currentUserAsync();case 2:return r=e.sent,t||(t=r?r.getSessionToken():void 0),e.next=6,D.default.getLiveQueryController().getDefaultLiveQueryClient();case 6:return(n=e.sent).shouldOpen()&&n.open(),a=n.subscribe(this,t),e.abrupt("return",a.subscribePromise.then((function(){return a})));case 10:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"fromNetwork",value:function(){return this._queriesLocalDatastore=!1,this._localDatastorePinName=null,this}},{key:"fromLocalDatastore",value:function(){return this.fromPinWithName(null)}},{key:"fromPin",value:function(){return this.fromPinWithName(Y.DEFAULT_PIN)}},{key:"fromPinWithName",value:function(e){return D.default.getLocalDatastore().checkIfEnabled()&&(this._queriesLocalDatastore=!0,this._localDatastorePinName=e),this}},{key:"cancel",value:function(){var e=this;return this._xhrRequest.task&&"function"==typeof this._xhrRequest.task.abort?(this._xhrRequest.task._aborted=!0,this._xhrRequest.task.abort(),this._xhrRequest.task=null,this._xhrRequest.onchange=function(){},this):this._xhrRequest.onchange=function(){return e.cancel()}}},{key:"_setRequestTask",value:function(e){var t=this;e.requestTask=function(e){t._xhrRequest.task=e,t._xhrRequest.onchange()}}}],[{key:"fromJSON",value:function(t,r){return new e(t).withJSON(r)}},{key:"or",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=new e(G(r));return a._orQuery(r),a}},{key:"and",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=new e(G(r));return a._andQuery(r),a}},{key:"nor",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=new e(G(r));return a._norQuery(r),a}}]),e}(),H={find:function(e,t,r){return D.default.getRESTController().request("GET","classes/"+e,t,r)},aggregate:function(e,t,r){return D.default.getRESTController().request("GET","aggregate/"+e,t,r)}};D.default.setQueryController(H);var Z=z;t.default=Z},32609:(e,t,r)=>{var n=r(60530);r(63978)(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(41511)),i=n(r(26394)),o=n(r(69198)),u=n(r(87672)),s=r(77733),l=(n(r(48205)),n(r(35146))),c=function(){function e(t,r){(0,i.default)(this,e),(0,u.default)(this,"parent",void 0),(0,u.default)(this,"key",void 0),(0,u.default)(this,"targetClassName",void 0),this.parent=t,this.key=r,this.targetClassName=null}return(0,o.default)(e,[{key:"_ensureParentAndKey",value:function(e,t){if(this.key=this.key||t,this.key!==t)throw new Error("Internal Error. Relation retrieved from two different keys.");if(this.parent){if(this.parent.className!==e.className)throw new Error("Internal Error. Relation retrieved from two different Objects.");if(this.parent.id){if(this.parent.id!==e.id)throw new Error("Internal Error. Relation retrieved from two different Objects.")}else e.id&&(this.parent=e)}else this.parent=e}},{key:"add",value:function(e){(0,a.default)(e)||(e=[e]);var t=new s.RelationOp(e,[]),r=this.parent;if(!r)throw new Error("Cannot add to a Relation without a parent");return 0===e.length||(r.set(this.key,t),this.targetClassName=t._targetClassName),r}},{key:"remove",value:function(e){(0,a.default)(e)||(e=[e]);var t=new s.RelationOp([],e);if(!this.parent)throw new Error("Cannot remove from a Relation without a parent");0!==e.length&&(this.parent.set(this.key,t),this.targetClassName=t._targetClassName)}},{key:"toJSON",value:function(){return{__type:"Relation",className:this.targetClassName}}},{key:"query",value:function(){var e,t=this.parent;if(!t)throw new Error("Cannot construct a query for a Relation without a parent");return this.targetClassName?e=new l.default(this.targetClassName):(e=new l.default(t.className),e._extraOptions.redirectClassNameForKey=this.key),e._addCondition("$relatedTo","object",{__type:"Pointer",className:t.className,objectId:t.id}),e._addCondition("$relatedTo","key",this.key),e}}]),e}();t.default=c},55778:(e,t,r)=>{var n=r(60530),a=r(63978),i=r(1068);a(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(26394)),u=n(r(69198)),s=n(r(31474)),l=n(r(51379)),c=n(r(214)),f=n(r(66380)),d=n(r(76102)),h=n(r(44820)),v=n(r(48205));function y(e){var t=function(){if("undefined"==typeof Reflect||!i)return!1;if(i.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(i(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;r=i(n,arguments,a)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}var p=function(e){(0,l.default)(r,e);var t=y(r);function r(e,n){var a;return(0,o.default)(this,r),a=t.call(this,"_Role"),"string"==typeof e&&n instanceof d.default&&(a.setName(e),a.setACL(n)),a}return(0,u.default)(r,[{key:"getName",value:function(){var e=this.get("name");return null==e||"string"==typeof e?e:""}},{key:"setName",value:function(e,t){return this._validateName(e),this.set("name",e,t)}},{key:"getUsers",value:function(){return this.relation("users")}},{key:"getRoles",value:function(){return this.relation("roles")}},{key:"_validateName",value:function(e){if("string"!=typeof e)throw new h.default(h.default.OTHER_CAUSE,"A role's name must be a String.");if(!/^[0-9a-zA-Z\-_ ]+$/.test(e))throw new h.default(h.default.OTHER_CAUSE,"A role's name can be only contain alphanumeric characters, _, -, and spaces.")}},{key:"validate",value:function(e,t){var n=(0,s.default)((0,f.default)(r.prototype),"validate",this).call(this,e,t);if(n)return n;if("name"in e&&e.name!==this.getName()){var a=e.name;if(this.id&&this.id!==e.objectId)return new h.default(h.default.OTHER_CAUSE,"A role's name can only be set before it has been saved.");try{this._validateName(a)}catch(e){return e}}return!1}}]),r}(v.default);v.default.registerSubclass("_Role",p);var g=p;t.default=g},98774:(e,t,r)=>{var n=r(60530);r(63978)(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(81643)),i=n(r(26394)),o=n(r(69198)),u=n(r(87672)),s=n(r(79128)),l=n(r(48205)),c=n(r(51104)),f=["String","Number","Boolean","Date","File","GeoPoint","Polygon","Array","Object","Pointer","Relation"],d=function(){function e(t){(0,i.default)(this,e),(0,u.default)(this,"className",void 0),(0,u.default)(this,"_fields",void 0),(0,u.default)(this,"_indexes",void 0),(0,u.default)(this,"_clp",void 0),"string"==typeof t&&("User"===t&&s.default.get("PERFORM_USER_REWRITE")?this.className="_User":this.className=t),this._fields={},this._indexes={}}return(0,o.default)(e,[{key:"get",value:function(){return this.assertClassName(),s.default.getSchemaController().get(this.className).then((function(e){if(!e)throw new Error("Schema not found.");return e}))}},{key:"save",value:function(){this.assertClassName();var e=s.default.getSchemaController(),t={className:this.className,fields:this._fields,indexes:this._indexes,classLevelPermissions:this._clp};return e.create(this.className,t)}},{key:"update",value:function(){this.assertClassName();var e=s.default.getSchemaController(),t={className:this.className,fields:this._fields,indexes:this._indexes,classLevelPermissions:this._clp};return this._fields={},this._indexes={},e.update(this.className,t)}},{key:"delete",value:function(){return this.assertClassName(),s.default.getSchemaController().delete(this.className)}},{key:"purge",value:function(){return this.assertClassName(),s.default.getSchemaController().purge(this.className)}},{key:"assertClassName",value:function(){if(!this.className)throw new Error("You must set a Class Name before making any request.")}},{key:"setCLP",value:function(e){return e instanceof c.default?this._clp=e.toJSON():this._clp=e,this}},{key:"addField",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t=t||"String",!e)throw new Error("field name may not be null.");if(-1===(0,a.default)(f).call(f,t))throw new Error("".concat(t," is not a valid type."));if("Pointer"===t)return this.addPointer(e,r.targetClass,r);if("Relation"===t)return this.addRelation(e,r.targetClass,r);var n={type:t};return"boolean"==typeof r.required&&(n.required=r.required),void 0!==r.defaultValue&&(n.defaultValue=r.defaultValue),"Date"===t&&r&&r.defaultValue&&(n.defaultValue={__type:"Date",iso:new Date(r.defaultValue)}),this._fields[e]=n,this}},{key:"addIndex",value:function(e,t){if(!e)throw new Error("index name may not be null.");if(!t)throw new Error("index may not be null.");return this._indexes[e]=t,this}},{key:"addString",value:function(e,t){return this.addField(e,"String",t)}},{key:"addNumber",value:function(e,t){return this.addField(e,"Number",t)}},{key:"addBoolean",value:function(e,t){return this.addField(e,"Boolean",t)}},{key:"addDate",value:function(e,t){return this.addField(e,"Date",t)}},{key:"addFile",value:function(e,t){return this.addField(e,"File",t)}},{key:"addGeoPoint",value:function(e,t){return this.addField(e,"GeoPoint",t)}},{key:"addPolygon",value:function(e,t){return this.addField(e,"Polygon",t)}},{key:"addArray",value:function(e,t){return this.addField(e,"Array",t)}},{key:"addObject",value:function(e,t){return this.addField(e,"Object",t)}},{key:"addPointer",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)throw new Error("field name may not be null.");if(!t)throw new Error("You need to set the targetClass of the Pointer.");var n={type:"Pointer",targetClass:t};return"boolean"==typeof r.required&&(n.required=r.required),void 0!==r.defaultValue&&(n.defaultValue=r.defaultValue,r.defaultValue instanceof l.default&&(n.defaultValue=r.defaultValue.toPointer())),this._fields[e]=n,this}},{key:"addRelation",value:function(e,t){if(!e)throw new Error("field name may not be null.");if(!t)throw new Error("You need to set the targetClass of the Relation.");return this._fields[e]={type:"Relation",targetClass:t},this}},{key:"deleteField",value:function(e){return this._fields[e]={__op:"Delete"},this}},{key:"deleteIndex",value:function(e){return this._indexes[e]={__op:"Delete"},this}}],[{key:"all",value:function(){return s.default.getSchemaController().get("").then((function(e){if(0===e.results.length)throw new Error("Schema not found.");return e.results}))}}]),e}(),h={send:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return s.default.getRESTController().request(t,"schemas/".concat(e),r,{useMasterKey:!0})},get:function(e){return this.send(e,"GET")},create:function(e,t){return this.send(e,"POST",t)},update:function(e,t){return this.send(e,"PUT",t)},delete:function(e){return this.send(e,"DELETE")},purge:function(e){return s.default.getRESTController().request("DELETE","purge/".concat(e),{},{useMasterKey:!0})}};s.default.setSchemaController(h);var v=d;t.default=v},99388:(e,t,r)=>{var n=r(60530),a=r(63978),i=r(1068);a(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(93476)),u=n(r(23765)),s=n(r(26394)),l=n(r(69198)),c=n(r(51379)),f=n(r(214)),d=n(r(66380)),h=n(r(79128)),v=n(r(75778)),y=n(r(48205)),p=n(r(15384));function g(e){var t=function(){if("undefined"==typeof Reflect||!i)return!1;if(i.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(i(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;r=i(n,arguments,a)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}var _=function(e){(0,c.default)(r,e);var t=g(r);function r(e){var n;if((0,s.default)(this,r),n=t.call(this,"_Session"),e&&"object"===(0,u.default)(e)&&!n.set(e||{}))throw new Error("Can't create an invalid Session");return n}return(0,l.default)(r,[{key:"getSessionToken",value:function(){var e=this.get("sessionToken");return"string"==typeof e?e:""}}],[{key:"readOnlyAttributes",value:function(){return["createdWith","expiresAt","installationId","restricted","sessionToken","user"]}},{key:"current",value:function(e){e=e||{};var t=h.default.getSessionController(),r={};return e.hasOwnProperty("useMasterKey")&&(r.useMasterKey=e.useMasterKey),p.default.currentAsync().then((function(e){return e?(r.sessionToken=e.getSessionToken(),t.getSession(r)):o.default.reject("There is no current user.")}))}},{key:"isCurrentSessionRevocable",value:function(){var e=p.default.current();return!!e&&(0,v.default)(e.getSessionToken()||"")}}]),r}(y.default);y.default.registerSubclass("_Session",_);var m={getSession:function(e){var t=h.default.getRESTController(),r=new _;return t.request("GET","sessions/me",{},e).then((function(e){return r._finishFetch(e),r._setExisted(!0),r}))}};h.default.setSessionController(m);var w=_;t.default=w},15384:(e,t,r)=>{var n=r(60530),a=r(3649),i=r(97093),o=r(93476),u=r(85507),s=r(23765),l=r(78914),c=r(21611),f=r(54943),d=r(63978),h=r(65420),v=r(1068);d(t,"__esModule",{value:!0}),t.default=void 0;var y=n(r(59340)),p=n(r(63978)),g=n(r(51161)),_=n(r(93476)),m=n(r(23765)),w=n(r(26394)),k=n(r(69198)),E=n(r(31474)),b=n(r(51379)),x=n(r(214)),C=n(r(66380)),T=n(r(79128)),S=n(r(75778)),P=n(r(44820)),N=n(r(48205)),R=n(r(99388)),O=n(r(1031));function A(){A=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof h?h:{},v=n.iterator||"@@iterator",y=n.asyncIterator||"@@asyncIterator",p=n.toStringTag||"@@toStringTag";function g(e,t,r){return d(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{g({},"")}catch(e){g=function(e,t,r){return e[t]=r}}function _(e,t,r,n){var a=t&&t.prototype instanceof k?t:k,i=f(a.prototype),o=new U(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(a,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw i;return I()}for(r.method=a,r.arg=i;;){var o=r.delegate;if(o){var u=N(o,r);if(u){if(u===w)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=m(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===w)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}(e,r,o),i}function m(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=_;var w={};function k(){}function E(){}function b(){}var x={};g(x,v,(function(){return this}));var C=c&&c(c(L([])));C&&C!==t&&r.call(C,v)&&(x=C);var T=b.prototype=k.prototype=f(x);function S(e){var t;l(t=["next","throw","return"]).call(t,(function(t){g(e,t,(function(e){return this._invoke(t,e)}))}))}function P(e,t){function n(a,i,o,u){var l=m(e[a],e,i);if("throw"!==l.type){var c=l.arg,f=c.value;return f&&"object"==s(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,o,u)}),(function(e){n("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,u)}))}u(l.arg)}var a;this._invoke=function(e,r){function i(){return new t((function(t,a){n(e,r,t,a)}))}return a=a?a.then(i,i):i()}}function N(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,N(e,t),"throw"===t.method))return w;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return w}var n=m(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,w;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,w):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,w)}function R(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function U(e){this.tryEntries=[{tryLoc:"root"}],l(e).call(e,R,this),this.reset(!0)}function L(e){if(e){var t=e[v];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:I}}function I(){return{value:void 0,done:!0}}return E.prototype=b,g(T,"constructor",b),g(b,"constructor",E),E.displayName=g(b,p,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===E||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return u?u(e,b):(e.__proto__=b,g(e,p,"GeneratorFunction")),e.prototype=f(T),e},e.awrap=function(e){return{__await:e}},S(P.prototype),g(P.prototype,y,(function(){return this})),e.AsyncIterator=P,e.async=function(t,r,n,a,i){void 0===i&&(i=o);var u=new P(_(t,r,n,a),i);return e.isGeneratorFunction(r)?u:u.next().then((function(e){return e.done?e.value:u.next()}))},S(T),g(T,p,"Generator"),g(T,v,(function(){return this})),g(T,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return i(t).call(t),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=L,U.prototype={constructor:U,reset:function(e){var t;if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,l(t=this.tryEntries).call(t,O),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+a(n).call(n,1))&&(this[n]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return o.type="throw",o.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,w):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),w},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),w}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;O(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:L(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),w}},e}function U(e){var t=function(){if("undefined"==typeof Reflect||!v)return!1;if(v.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(v(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,C.default)(e);if(t){var a=(0,C.default)(this).constructor;r=v(n,arguments,a)}else r=n.apply(this,arguments);return(0,x.default)(this,r)}}var L="currentUser",I=!T.default.get("IS_NODE"),D=!1,j=null,q={},M=function(e){(0,b.default)(u,e);var t,r,n,a,i,o=U(u);function u(e){var t;if((0,w.default)(this,u),t=o.call(this,"_User"),e&&"object"===(0,m.default)(e)&&!t.set(e||{}))throw new Error("Can't create an invalid Parse User");return t}return(0,k.default)(u,[{key:"_upgradeToRevocableSession",value:function(e){var t={};return(e=e||{}).hasOwnProperty("useMasterKey")&&(t.useMasterKey=e.useMasterKey),T.default.getUserController().upgradeToRevocableSession(this,t)}},{key:"linkWith",value:function(e,t){var r,n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(a.sessionToken=a.sessionToken||this.getSessionToken()||"","string"==typeof e)if(r=e,q[e])e=q[e];else{var i={restoreAuthentication:function(){return!0},getAuthType:function(){return r}};q[i.getAuthType()]=i,e=i}else r=e.getAuthType();if(t&&t.hasOwnProperty("authData")){var o=this.get("authData")||{};if("object"!==(0,m.default)(o))throw new Error("Invalid type: authData field should be an object");return o[r]=t.authData,T.default.getUserController().linkWith(this,o,a)}return new _.default((function(t,r){e.authenticate({success:function(e,i){var o={};o.authData=i,n.linkWith(e,o,a).then((function(){t(n)}),(function(e){r(e)}))},error:function(e,t){r(t)}})}))}},{key:"_linkWith",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.linkWith(e,t,r)}},{key:"_synchronizeAuthData",value:function(e){if(this.isCurrent()&&e){var t;"string"==typeof e?e=q[t=e]:t=e.getAuthType();var r=this.get("authData");if(e&&r&&"object"===(0,m.default)(r))e.restoreAuthentication(r[t])||this._unlinkFrom(e)}}},{key:"_synchronizeAllAuthData",value:function(){var e=this.get("authData");if("object"===(0,m.default)(e))for(var t in e)this._synchronizeAuthData(t)}},{key:"_cleanupAuthData",value:function(){if(this.isCurrent()){var e=this.get("authData");if("object"===(0,m.default)(e))for(var t in e)e[t]||delete e[t]}}},{key:"_unlinkFrom",value:function(e,t){var r=this;return this.linkWith(e,{authData:null},t).then((function(){return r._synchronizeAuthData(e),_.default.resolve(r)}))}},{key:"_isLinked",value:function(e){var t;t="string"==typeof e?e:e.getAuthType();var r=this.get("authData")||{};return"object"===(0,m.default)(r)&&!!r[t]}},{key:"_logOutWithAll",value:function(){var e=this.get("authData");if("object"===(0,m.default)(e))for(var t in e)this._logOutWith(t)}},{key:"_logOutWith",value:function(e){this.isCurrent()&&("string"==typeof e&&(e=q[e]),e&&e.deauthenticate&&e.deauthenticate())}},{key:"_preserveFieldsOnFetch",value:function(){return{sessionToken:this.get("sessionToken")}}},{key:"isCurrent",value:function(){var e=u.current();return!!e&&e.id===this.id}},{key:"isCurrentAsync",value:(i=(0,g.default)(A().mark((function e(){var t;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.currentAsync();case 2:return t=e.sent,e.abrupt("return",!!t&&t.id===this.id);case 4:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"getUsername",value:function(){var e=this.get("username");return null==e||"string"==typeof e?e:""}},{key:"setUsername",value:function(e){var t=this.get("authData");t&&"object"===(0,m.default)(t)&&t.hasOwnProperty("anonymous")&&(t.anonymous=null),this.set("username",e)}},{key:"setPassword",value:function(e){this.set("password",e)}},{key:"getEmail",value:function(){var e=this.get("email");return null==e||"string"==typeof e?e:""}},{key:"setEmail",value:function(e){return this.set("email",e)}},{key:"getSessionToken",value:function(){var e=this.get("sessionToken");return null==e||"string"==typeof e?e:""}},{key:"authenticated",value:function(){var e=u.current();return!!this.get("sessionToken")&&!!e&&e.id===this.id}},{key:"signUp",value:function(e,t){var r={};return(t=t||{}).hasOwnProperty("useMasterKey")&&(r.useMasterKey=t.useMasterKey),t.hasOwnProperty("installationId")&&(r.installationId=t.installationId),t.hasOwnProperty("context")&&"[object Object]"===Object.prototype.toString.call(t.context)&&(r.context=t.context),T.default.getUserController().signUp(this,e,r)}},{key:"logIn",value:function(e){var t={usePost:!0};return(e=e||{}).hasOwnProperty("useMasterKey")&&(t.useMasterKey=e.useMasterKey),e.hasOwnProperty("installationId")&&(t.installationId=e.installationId),e.hasOwnProperty("usePost")&&(t.usePost=e.usePost),T.default.getUserController().logIn(this,t)}},{key:"save",value:(a=(0,g.default)(A().mark((function e(){var t,r,n,a=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=a.length,r=new Array(t),n=0;n<t;n++)r[n]=a[n];return e.next=3,(0,E.default)((0,C.default)(u.prototype),"save",this).apply(this,r);case 3:return e.next=5,this.isCurrentAsync();case 5:if(!e.sent){e.next=8;break}return e.abrupt("return",T.default.getUserController().updateUserOnDisk(this));case 8:return e.abrupt("return",this);case 9:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"destroy",value:(n=(0,g.default)(A().mark((function e(){var t,r,n,a=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=a.length,r=new Array(t),n=0;n<t;n++)r[n]=a[n];return e.next=3,(0,E.default)((0,C.default)(u.prototype),"destroy",this).apply(this,r);case 3:return e.next=5,this.isCurrentAsync();case 5:if(!e.sent){e.next=8;break}return e.abrupt("return",T.default.getUserController().removeUserFromDisk());case 8:return e.abrupt("return",this);case 9:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"fetch",value:(r=(0,g.default)(A().mark((function e(){var t,r,n,a=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=a.length,r=new Array(t),n=0;n<t;n++)r[n]=a[n];return e.next=3,(0,E.default)((0,C.default)(u.prototype),"fetch",this).apply(this,r);case 3:return e.next=5,this.isCurrentAsync();case 5:if(!e.sent){e.next=8;break}return e.abrupt("return",T.default.getUserController().updateUserOnDisk(this));case 8:return e.abrupt("return",this);case 9:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"fetchWithInclude",value:(t=(0,g.default)(A().mark((function e(){var t,r,n,a=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=a.length,r=new Array(t),n=0;n<t;n++)r[n]=a[n];return e.next=3,(0,E.default)((0,C.default)(u.prototype),"fetchWithInclude",this).apply(this,r);case 3:return e.next=5,this.isCurrentAsync();case 5:if(!e.sent){e.next=8;break}return e.abrupt("return",T.default.getUserController().updateUserOnDisk(this));case 8:return e.abrupt("return",this);case 9:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"verifyPassword",value:function(e,t){var r=this.getUsername()||"";return u.verifyPassword(r,e,t)}}],[{key:"readOnlyAttributes",value:function(){return["sessionToken"]}},{key:"extend",value:function(e,t){if(e)for(var r in e)"className"!==r&&(0,p.default)(u.prototype,r,{value:e[r],enumerable:!1,writable:!0,configurable:!0});if(t)for(var n in t)"className"!==n&&(0,p.default)(u,n,{value:t[n],enumerable:!1,writable:!0,configurable:!0});return u}},{key:"current",value:function(){return I?T.default.getUserController().currentUser():null}},{key:"currentAsync",value:function(){return I?T.default.getUserController().currentUserAsync():_.default.resolve(null)}},{key:"signUp",value:function(e,t,r,n){return(r=r||{}).username=e,r.password=t,new this(r).signUp({},n)}},{key:"logIn",value:function(e,t,r){if("string"!=typeof e)return _.default.reject(new P.default(P.default.OTHER_CAUSE,"Username must be a string."));if("string"!=typeof t)return _.default.reject(new P.default(P.default.OTHER_CAUSE,"Password must be a string."));var n=new this;return n._finishFetch({username:e,password:t}),n.logIn(r)}},{key:"become",value:function(e,t){if(!I)throw new Error("It is not memory-safe to become a user in a server environment");var r={sessionToken:e};(t=t||{}).hasOwnProperty("useMasterKey")&&(r.useMasterKey=t.useMasterKey);var n=T.default.getUserController(),a=new this;return n.become(a,r)}},{key:"me",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=T.default.getUserController(),n={sessionToken:e};t.useMasterKey&&(n.useMasterKey=t.useMasterKey);var a=new this;return r.me(a,n)}},{key:"hydrate",value:function(e){var t=T.default.getUserController(),r=new this;return t.hydrate(r,e)}},{key:"logInWith",value:function(e,t,r){return(new this).linkWith(e,t,r)}},{key:"logOut",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return T.default.getUserController().logOut(e)}},{key:"requestPasswordReset",value:function(e,t){var r={};return(t=t||{}).hasOwnProperty("useMasterKey")&&(r.useMasterKey=t.useMasterKey),T.default.getUserController().requestPasswordReset(e,r)}},{key:"requestEmailVerification",value:function(e,t){var r={};return(t=t||{}).hasOwnProperty("useMasterKey")&&(r.useMasterKey=t.useMasterKey),T.default.getUserController().requestEmailVerification(e,r)}},{key:"verifyPassword",value:function(e,t,r){if("string"!=typeof e)return _.default.reject(new P.default(P.default.OTHER_CAUSE,"Username must be a string."));if("string"!=typeof t)return _.default.reject(new P.default(P.default.OTHER_CAUSE,"Password must be a string."));var n={};return(r=r||{}).hasOwnProperty("useMasterKey")&&(n.useMasterKey=r.useMasterKey),T.default.getUserController().verifyPassword(e,t,n)}},{key:"allowCustomUserClass",value:function(e){T.default.set("PERFORM_USER_REWRITE",!e)}},{key:"enableRevocableSession",value:function(e){if(e=e||{},T.default.set("FORCE_REVOCABLE_SESSION",!0),I){var t=u.current();if(t)return t._upgradeToRevocableSession(e)}return _.default.resolve()}},{key:"enableUnsafeCurrentUser",value:function(){I=!0}},{key:"disableUnsafeCurrentUser",value:function(){I=!1}},{key:"_registerAuthenticationProvider",value:function(e){q[e.getAuthType()]=e,u.currentAsync().then((function(t){t&&t._synchronizeAuthData(e.getAuthType())}))}},{key:"_logInWith",value:function(e,t,r){return(new this).linkWith(e,t,r)}},{key:"_clearCache",value:function(){j=null,D=!1}},{key:"_setCurrentUserCache",value:function(e){j=e}}]),u}(N.default);N.default.registerSubclass("_User",M);var K={updateUserOnDisk:function(e){var t=O.default.generatePath(L),r=e.toJSON();delete r.password,r.className="_User";var n=(0,y.default)(r);T.default.get("ENCRYPTED_USER")&&(n=T.default.getCryptoController().encrypt(r,T.default.get("ENCRYPTED_KEY")));return O.default.setItemAsync(t,n).then((function(){return e}))},removeUserFromDisk:function(){var e=O.default.generatePath(L);return D=!0,j=null,O.default.removeItemAsync(e)},setCurrentUser:function(e){return j=e,e._cleanupAuthData(),e._synchronizeAllAuthData(),K.updateUserOnDisk(e)},currentUser:function(){if(j)return j;if(D)return null;if(O.default.async())throw new Error("Cannot call currentUser() when using a platform with an async storage system. Call currentUserAsync() instead.");var e=O.default.generatePath(L),t=O.default.getItem(e);if(D=!0,!t)return j=null,null;T.default.get("ENCRYPTED_USER")&&(t=T.default.getCryptoController().decrypt(t,T.default.get("ENCRYPTED_KEY")));(t=JSON.parse(t)).className||(t.className="_User"),t._id&&(t.objectId!==t._id&&(t.objectId=t._id),delete t._id),t._sessionToken&&(t.sessionToken=t._sessionToken,delete t._sessionToken);var r=N.default.fromJSON(t);return j=r,r._synchronizeAllAuthData(),r},currentUserAsync:function(){if(j)return _.default.resolve(j);if(D)return _.default.resolve(null);var e=O.default.generatePath(L);return O.default.getItemAsync(e).then((function(e){if(D=!0,!e)return j=null,_.default.resolve(null);T.default.get("ENCRYPTED_USER")&&(e=T.default.getCryptoController().decrypt(e.toString(),T.default.get("ENCRYPTED_KEY")));(e=JSON.parse(e)).className||(e.className="_User"),e._id&&(e.objectId!==e._id&&(e.objectId=e._id),delete e._id),e._sessionToken&&(e.sessionToken=e._sessionToken,delete e._sessionToken);var t=N.default.fromJSON(e);return j=t,t._synchronizeAllAuthData(),_.default.resolve(t)}))},signUp:function(e,t,r){var n=t&&t.username||e.get("username"),a=t&&t.password||e.get("password");return n&&n.length?a&&a.length?e.save(t,r).then((function(){return e._finishFetch({password:void 0}),I?K.setCurrentUser(e):e})):_.default.reject(new P.default(P.default.OTHER_CAUSE,"Cannot sign up user with an empty password.")):_.default.reject(new P.default(P.default.OTHER_CAUSE,"Cannot sign up user with an empty username."))},logIn:function(e,t){var r=T.default.getRESTController(),n=T.default.getObjectStateController(),a={username:e.get("username"),password:e.get("password")};return r.request(t.usePost?"POST":"GET","login",a,t).then((function(t){return e._migrateId(t.objectId),e._setExisted(!0),n.setPendingOp(e._getStateIdentifier(),"username",void 0),n.setPendingOp(e._getStateIdentifier(),"password",void 0),t.password=void 0,e._finishFetch(t),I?K.setCurrentUser(e):_.default.resolve(e)}))},become:function(e,t){return T.default.getRESTController().request("GET","users/me",{},t).then((function(t){return e._finishFetch(t),e._setExisted(!0),K.setCurrentUser(e)}))},hydrate:function(e,t){return e._finishFetch(t),e._setExisted(!0),t.sessionToken&&I?K.setCurrentUser(e):_.default.resolve(e)},me:function(e,t){return T.default.getRESTController().request("GET","users/me",{},t).then((function(t){return e._finishFetch(t),e._setExisted(!0),e}))},logOut:function(e){var t=T.default.getRESTController();return e.sessionToken?t.request("POST","logout",{},e):K.currentUserAsync().then((function(e){var r=O.default.generatePath(L),n=O.default.removeItemAsync(r);if(null!==e){var a=e.getSessionToken();a&&(0,S.default)(a)&&(n=n.then((function(){return t.request("POST","logout",{},{sessionToken:a})}))),e._logOutWithAll(),e._finishFetch({sessionToken:void 0})}return D=!0,j=null,n}))},requestPasswordReset:function(e,t){return T.default.getRESTController().request("POST","requestPasswordReset",{email:e},t)},upgradeToRevocableSession:function(e,t){return(0,g.default)(A().mark((function r(){var n,a,i,o;return A().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=e.getSessionToken()){r.next=3;break}return r.abrupt("return",_.default.reject(new P.default(P.default.SESSION_MISSING,"Cannot upgrade a user with no session token")));case 3:return t.sessionToken=n,a=T.default.getRESTController(),r.next=7,a.request("POST","upgradeToRevocableSession",{},t);case 7:return i=r.sent,(o=new R.default)._finishFetch(i),e._finishFetch({sessionToken:o.getSessionToken()}),r.next=13,e.isCurrentAsync();case 13:if(!r.sent){r.next=16;break}return r.abrupt("return",K.setCurrentUser(e));case 16:return r.abrupt("return",_.default.resolve(e));case 17:case"end":return r.stop()}}),r)})))()},linkWith:function(e,t,r){return e.save({authData:t},r).then((function(){return I?K.setCurrentUser(e):e}))},verifyPassword:function(e,t,r){return T.default.getRESTController().request("GET","verifyPassword",{username:e,password:t},r)},requestEmailVerification:function(e,t){return T.default.getRESTController().request("POST","verificationEmailRequest",{email:e},t)}};T.default.setUserController(K);var F=M;t.default=F},92390:(e,t,r)=>{var n=r(60530);r(63978)(t,"__esModule",{value:!0}),t.getPushStatus=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={useMasterKey:!0};t.hasOwnProperty("useMasterKey")&&(r.useMasterKey=t.useMasterKey);return new o.default("_PushStatus").get(e,r)},t.send=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.where&&e.where instanceof o.default&&(e.where=e.where.toJSON().where);e.push_time&&"object"===(0,a.default)(e.push_time)&&(e.push_time=e.push_time.toJSON());e.expiration_time&&"object"===(0,a.default)(e.expiration_time)&&(e.expiration_time=e.expiration_time.toJSON());if(e.expiration_time&&e.expiration_interval)throw new Error("expiration_time and expiration_interval cannot both be set.");var r={useMasterKey:!0};t.hasOwnProperty("useMasterKey")&&(r.useMasterKey=t.useMasterKey);return i.default.getPushController().send(e,r)};var a=n(r(23765)),i=n(r(79128)),o=n(r(35146));var u={send:function(e,t){return i.default.getRESTController().request("POST","push",e,t)}};i.default.setPushController(u)}}]);