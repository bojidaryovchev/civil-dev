"use strict";(self.webpackChunkcivil_dev=self.webpackChunkcivil_dev||[]).push([[213],{76102:(e,t,s)=>{var r=s(60530);s(63978)(t,"__esModule",{value:!0}),t.default=void 0;var i=r(s(86902)),n=r(s(23765)),a=r(s(26394)),o=r(s(69198)),u=r(s(87672)),c=r(s(55778)),l=r(s(15384)),f="*",d=function(){function e(t){if((0,a.default)(this,e),(0,u.default)(this,"permissionsById",void 0),this.permissionsById={},t&&"object"===(0,n.default)(t))if(t instanceof l.default)this.setReadAccess(t,!0),this.setWriteAccess(t,!0);else for(var s in t){var r=t[s];for(var i in this.permissionsById[s]={},r){var o=r[i];if("read"!==i&&"write"!==i)throw new TypeError("Tried to create an ACL with an invalid permission type.");if("boolean"!=typeof o)throw new TypeError("Tried to create an ACL with an invalid permission value.");this.permissionsById[s][i]=o}}else if("function"==typeof t)throw new TypeError("ParseACL constructed with a function. Did you forget ()?")}return(0,o.default)(e,[{key:"toJSON",value:function(){var e={};for(var t in this.permissionsById)e[t]=this.permissionsById[t];return e}},{key:"equals",value:function(t){if(!(t instanceof e))return!1;var s=(0,i.default)(this.permissionsById),r=(0,i.default)(t.permissionsById);if(s.length!==r.length)return!1;for(var n in this.permissionsById){if(!t.permissionsById[n])return!1;if(this.permissionsById[n].read!==t.permissionsById[n].read)return!1;if(this.permissionsById[n].write!==t.permissionsById[n].write)return!1}return!0}},{key:"_setAccess",value:function(e,t,s){if(t instanceof l.default)t=t.id;else if(t instanceof c.default){var r=t.getName();if(!r)throw new TypeError("Role must have a name");t="role:"+r}if("string"!=typeof t)throw new TypeError("userId must be a string.");if("boolean"!=typeof s)throw new TypeError("allowed must be either true or false.");var n=this.permissionsById[t];if(!n){if(!s)return;n={},this.permissionsById[t]=n}s?this.permissionsById[t][e]=!0:(delete n[e],0===(0,i.default)(n).length&&delete this.permissionsById[t])}},{key:"_getAccess",value:function(e,t){if(t instanceof l.default){if(!(t=t.id))throw new Error("Cannot get access for a ParseUser without an ID")}else if(t instanceof c.default){var s=t.getName();if(!s)throw new TypeError("Role must have a name");t="role:"+s}var r=this.permissionsById[t];return!!r&&!!r[e]}},{key:"setReadAccess",value:function(e,t){this._setAccess("read",e,t)}},{key:"getReadAccess",value:function(e){return this._getAccess("read",e)}},{key:"setWriteAccess",value:function(e,t){this._setAccess("write",e,t)}},{key:"getWriteAccess",value:function(e){return this._getAccess("write",e)}},{key:"setPublicReadAccess",value:function(e){this.setReadAccess(f,e)}},{key:"getPublicReadAccess",value:function(){return this.getReadAccess(f)}},{key:"setPublicWriteAccess",value:function(e){this.setWriteAccess(f,e)}},{key:"getPublicWriteAccess",value:function(){return this.getWriteAccess(f)}},{key:"getRoleReadAccess",value:function(e){if(e instanceof c.default&&(e=e.getName()),"string"!=typeof e)throw new TypeError("role must be a ParseRole or a String");return this.getReadAccess("role:"+e)}},{key:"getRoleWriteAccess",value:function(e){if(e instanceof c.default&&(e=e.getName()),"string"!=typeof e)throw new TypeError("role must be a ParseRole or a String");return this.getWriteAccess("role:"+e)}},{key:"setRoleReadAccess",value:function(e,t){if(e instanceof c.default&&(e=e.getName()),"string"!=typeof e)throw new TypeError("role must be a ParseRole or a String");this.setReadAccess("role:"+e,t)}},{key:"setRoleWriteAccess",value:function(e,t){if(e instanceof c.default&&(e=e.getName()),"string"!=typeof e)throw new TypeError("role must be a ParseRole or a String");this.setWriteAccess("role:"+e,t)}}]),e}();t.default=d},51104:(e,t,s)=>{var r=s(60530),i=s(63978),n=s(20368),a=s(39649),o=s(78914),u=s(34074),c=s(20116),l=s(14310),f=s(86902),d=s(41511),h=s(19996),A=s(65420),p=s(66419),v=s(3649);i(t,"__esModule",{value:!0}),t.default=void 0;var _=r(s(41511)),E=r(s(86902)),y=r(s(3649)),g=r(s(51942)),I=r(s(18777)),R=r(s(72119)),m=r(s(10062)),N=r(s(78580)),T=r(s(23765)),w=r(s(26394)),M=r(s(69198)),S=r(s(87672)),P=r(s(39392)),L=r(s(55778)),O=r(s(15384));function k(e,t){var s=f(e);if(l){var r=l(e);t&&(r=c(r).call(r,(function(t){return u(e,t).enumerable}))),s.push.apply(s,r)}return s}function D(e,t){var s=void 0!==A&&h(e)||e["@@iterator"];if(!s){if(d(e)||(s=function(e,t){var s;if(!e)return;if("string"==typeof e)return b(e,t);var r=v(s=Object.prototype.toString.call(e)).call(s,8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return p(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}(e))||t&&e&&"number"==typeof e.length){s&&(e=s);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,a=!0,o=!1;return{s:function(){s=s.call(e)},n:function(){var e=s.next();return a=e.done,e},e:function(e){o=!0,n=e},f:function(){try{a||null==s.return||s.return()}finally{if(o)throw n}}}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,r=new Array(t);s<t;s++)r[s]=e[s];return r}var C="*",F=new P.default;F.set("get",{}),F.set("find",{}),F.set("count",{}),F.set("create",{}),F.set("update",{}),F.set("delete",{}),F.set("addField",{});var U=new P.default;U.set("protectedFields",{});var V=function(){function e(t){var s=this;(0,w.default)(this,e),(0,S.default)(this,"permissionsMap",void 0),this.permissionsMap={};var r,i=D((0,R.default)(F).call(F));try{var n=function(){var e=(0,I.default)(r.value,2),t=e[0],i=e[1];s.permissionsMap[t]=(0,g.default)({},i);var n=t.charAt(0).toUpperCase()+(0,y.default)(t).call(t,1);s["get".concat(n,"RequiresAuthentication")]=function(){return this._getAccess(t,"requiresAuthentication")},s["set".concat(n,"RequiresAuthentication")]=function(e){this._setAccess(t,"requiresAuthentication",e)},s["get".concat(n,"PointerFields")]=function(){return this._getAccess(t,"pointerFields",!1)},s["set".concat(n,"PointerFields")]=function(e){this._setArrayAccess(t,"pointerFields",e)},s["get".concat(n,"Access")]=function(e){return this._getAccess(t,e)},s["set".concat(n,"Access")]=function(e,s){this._setAccess(t,e,s)},s["getPublic".concat(n,"Access")]=function(){return this["get".concat(n,"Access")](C)},s["setPublic".concat(n,"Access")]=function(e){this["set".concat(n,"Access")](C,e)},s["getRole".concat(n,"Access")]=function(e){return this["get".concat(n,"Access")](this._getRoleName(e))},s["setRole".concat(n,"Access")]=function(e,t){this["set".concat(n,"Access")](this._getRoleName(e),t)}};for(i.s();!(r=i.n()).done;)n()}catch(e){i.e(e)}finally{i.f()}var a,o=D((0,R.default)(U).call(U));try{for(o.s();!(a=o.n()).done;){var u=(0,I.default)(a.value,2),c=u[0],l=u[1];this.permissionsMap[c]=(0,g.default)({},l)}}catch(e){o.e(e)}finally{o.f()}if(t&&"object"===(0,T.default)(t))if(t instanceof O.default)this.setReadAccess(t,!0),this.setWriteAccess(t,!0);else if(t instanceof L.default)this.setRoleReadAccess(t,!0),this.setRoleWriteAccess(t,!0);else for(var f in t){var d,h=t[f],A=!!F.get(f),p=!!U.get(f),v=(0,N.default)(d=["readUserFields","writeUserFields"]).call(d,f);if("string"!=typeof f||!(A||p||v))throw new TypeError("Tried to create an CLP with an invalid permission type.");if(v){if((0,m.default)(h).call(h,(function(e){return"string"==typeof e}))){this.permissionsMap[f]=h;continue}throw new TypeError("Tried to create an CLP with an invalid permission value.")}for(var _ in h){var E=h[_];if("boolean"!=typeof E&&!p&&"pointerFields"!==_)throw new TypeError("Tried to create an CLP with an invalid permission value.");this.permissionsMap[f][_]=E}}else if("function"==typeof t)throw new TypeError("ParseCLP constructed with a function. Did you forget ()?")}return(0,M.default)(e,[{key:"toJSON",value:function(){return function(e){for(var t=1;t<arguments.length;t++){var s,r,c=null!=arguments[t]?arguments[t]:{};t%2?o(s=k(Object(c),!0)).call(s,(function(t){(0,S.default)(e,t,c[t])})):a?n(e,a(c)):o(r=k(Object(c))).call(r,(function(t){i(e,t,u(c,t))}))}return e}({},this.permissionsMap)}},{key:"equals",value:function(t){if(!(t instanceof e))return!1;var s=(0,E.default)(this.permissionsMap),r=(0,E.default)(t.permissionsMap);if(s.length!==r.length)return!1;for(var i in this.permissionsMap){if(!t.permissionsMap[i])return!1;var n=(0,E.default)(this.permissionsMap[i]),a=(0,E.default)(t.permissionsMap[i]);if(n.length!==a.length)return!1;for(var o in this.permissionsMap[i]){if(!t.permissionsMap[i][o])return!1;if(this.permissionsMap[i][o]!==t.permissionsMap[i][o])return!1}}return!0}},{key:"_getRoleName",value:function(e){var t=e;if(e instanceof L.default&&(t=e.getName()),"string"!=typeof t)throw new TypeError("role must be a Parse.Role or a String");return"role:".concat(t)}},{key:"_parseEntity",value:function(e){var t=e;if(t instanceof O.default){if(!(t=t.id))throw new Error("Cannot get access for a Parse.User without an id.")}else t instanceof L.default&&(t=this._getRoleName(t));if("string"!=typeof t)throw new TypeError("userId must be a string.");return t}},{key:"_setAccess",value:function(e,t,s){if(t=this._parseEntity(t),"boolean"!=typeof s)throw new TypeError("allowed must be either true or false.");if(!this.permissionsMap[e][t]){if(!s)return;this.permissionsMap[e][t]={}}s?this.permissionsMap[e][t]=!0:delete this.permissionsMap[e][t]}},{key:"_getAccess",value:function(e,t){var s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t=this._parseEntity(t);var r=this.permissionsMap[e][t];return s?!!r&&!!this.permissionsMap[e][t]:r}},{key:"_setArrayAccess",value:function(e,t,s){if(t=this._parseEntity(t),this.permissionsMap[e][t]||(this.permissionsMap[e][t]=[]),!s||(0,_.default)(s)&&0===s.length)delete this.permissionsMap[e][t];else{if(!(0,_.default)(s)||!(0,m.default)(s).call(s,(function(e){return"string"==typeof e})))throw new TypeError("fields must be an array of strings or undefined.");this.permissionsMap[e][t]=s}}},{key:"_setGroupPointerPermission",value:function(e,t){if(this.permissionsMap[e]||(this.permissionsMap[e]=[]),!t||(0,_.default)(t)&&0===t.length)delete this.permissionsMap[e];else{if(!(0,_.default)(t)||!(0,m.default)(t).call(t,(function(e){return"string"==typeof e})))throw new TypeError("".concat(e,".pointerFields must be an array of strings or undefined."));this.permissionsMap[e]=t}}},{key:"_getGroupPointerPermissions",value:function(e){return this.permissionsMap[e]}},{key:"setReadUserFields",value:function(e){this._setGroupPointerPermission("readUserFields",e)}},{key:"getReadUserFields",value:function(){return this._getGroupPointerPermissions("readUserFields")}},{key:"setWriteUserFields",value:function(e){this._setGroupPointerPermission("writeUserFields",e)}},{key:"getWriteUserFields",value:function(){return this._getGroupPointerPermissions("writeUserFields")}},{key:"setProtectedFields",value:function(e,t){this._setArrayAccess("protectedFields",e,t)}},{key:"getProtectedFields",value:function(e){return this._getAccess("protectedFields",e,!1)}},{key:"setReadAccess",value:function(e,t){this._setAccess("find",e,t),this._setAccess("get",e,t),this._setAccess("count",e,t)}},{key:"getReadAccess",value:function(e){return this._getAccess("find",e)&&this._getAccess("get",e)&&this._getAccess("count",e)}},{key:"setWriteAccess",value:function(e,t){this._setAccess("create",e,t),this._setAccess("update",e,t),this._setAccess("delete",e,t),this._setAccess("addField",e,t)}},{key:"getWriteAccess",value:function(e){return this._getAccess("create",e)&&this._getAccess("update",e)&&this._getAccess("delete",e)&&this._getAccess("addField",e)}},{key:"setPublicReadAccess",value:function(e){this.setReadAccess(C,e)}},{key:"getPublicReadAccess",value:function(){return this.getReadAccess(C)}},{key:"setPublicWriteAccess",value:function(e){this.setWriteAccess(C,e)}},{key:"getPublicWriteAccess",value:function(){return this.getWriteAccess(C)}},{key:"setPublicProtectedFields",value:function(e){this.setProtectedFields(C,e)}},{key:"getPublicProtectedFields",value:function(){return this.getProtectedFields(C)}},{key:"getRoleReadAccess",value:function(e){return this.getReadAccess(this._getRoleName(e))}},{key:"getRoleWriteAccess",value:function(e){return this.getWriteAccess(this._getRoleName(e))}},{key:"setRoleReadAccess",value:function(e,t){this.setReadAccess(this._getRoleName(e),t)}},{key:"setRoleWriteAccess",value:function(e,t){this.setWriteAccess(this._getRoleName(e),t)}},{key:"getRoleProtectedFields",value:function(e){return this.getProtectedFields(this._getRoleName(e))}},{key:"setRoleProtectedFields",value:function(e,t){this.setProtectedFields(this._getRoleName(e),t)}}]),e}();t.default=V},74793:(e,t,s)=>{var r=s(60530);s(63978)(t,"__esModule",{value:!0}),t.default=void 0;var i=r(s(59340)),n=r(s(23765)),a=r(s(93476)),o=r(s(26394)),u=r(s(69198)),c=r(s(87672)),l=r(s(79128)),f=r(s(80825)),d=r(s(27504)),h=r(s(51121)),A=r(s(44820)),p=r(s(1031)),v=function(){function e(){(0,o.default)(this,e),(0,c.default)(this,"attributes",void 0),(0,c.default)(this,"_escapedAttributes",void 0),this.attributes={},this._escapedAttributes={}}return(0,u.default)(e,[{key:"get",value:function(e){return this.attributes[e]}},{key:"escape",value:function(e){var t=this._escapedAttributes[e];if(t)return t;var s=this.attributes[e],r="";return null!=s&&(r=(0,h.default)(s.toString())),this._escapedAttributes[e]=r,r}}],[{key:"current",value:function(){return l.default.getConfigController().current()}},{key:"get",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l.default.getConfigController().get(e)}},{key:"save",value:function(e,t){var s=l.default.getConfigController();return s.save(e,t).then((function(){return s.get({useMasterKey:!0})}),(function(e){return a.default.reject(e)}))}},{key:"_clearCache",value:function(){_=null}}]),e}(),_=null,E="currentConfig";function y(e){try{var t=JSON.parse(e);if(t&&"object"===(0,n.default)(t))return(0,f.default)(t)}catch(e){return null}}var g={current:function(){if(_)return _;var e=new v,t=p.default.generatePath(E);if(!p.default.async()){var s=p.default.getItem(t);if(s){var r=y(s);r&&(e.attributes=r,_=e)}return e}return p.default.getItemAsync(t).then((function(t){if(t){var s=y(t);s&&(e.attributes=s,_=e)}return e}))},get:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l.default.getRESTController().request("GET","config",{},e).then((function(e){if(!e||!e.params){var t=new A.default(A.default.INVALID_JSON,"Config JSON response invalid.");return a.default.reject(t)}var s=new v;for(var r in s.attributes={},e.params)s.attributes[r]=(0,f.default)(e.params[r]);return _=s,p.default.setItemAsync(p.default.generatePath(E),(0,i.default)(e.params)).then((function(){return s}))}))},save:function(e,t){var s=l.default.getRESTController(),r={};for(var i in e)r[i]=(0,d.default)(e[i]);return s.request("PUT","config",{params:r,masterKeyOnly:t},{useMasterKey:!0}).then((function(e){if(e&&e.result)return a.default.resolve();var t=new A.default(A.default.INTERNAL_SERVER_ERROR,"Error occured updating Config.");return a.default.reject(t)}))}};l.default.setConfigController(g);var I=v;t.default=I},44820:(e,t,s)=>{var r=s(60530),i=s(63978),n=s(1068);i(t,"__esModule",{value:!0}),t.default=void 0;var a=r(s(63978)),o=r(s(26394)),u=r(s(69198)),c=r(s(5824)),l=r(s(51379)),f=r(s(214)),d=r(s(66380));function h(e){var t=function(){if("undefined"==typeof Reflect||!n)return!1;if(n.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(n(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,r=(0,d.default)(e);if(t){var i=(0,d.default)(this).constructor;s=n(r,arguments,i)}else s=r.apply(this,arguments);return(0,f.default)(this,s)}}var A=function(e){(0,l.default)(s,e);var t=h(s);function s(e,r){var i;return(0,o.default)(this,s),(i=t.call(this,r)).code=e,(0,a.default)((0,c.default)(i),"message",{enumerable:!0,value:r}),i}return(0,u.default)(s,[{key:"toString",value:function(){return"ParseError: "+this.code+" "+this.message}}]),s}((0,r(s(74803)).default)(Error));A.OTHER_CAUSE=-1,A.INTERNAL_SERVER_ERROR=1,A.CONNECTION_FAILED=100,A.OBJECT_NOT_FOUND=101,A.INVALID_QUERY=102,A.INVALID_CLASS_NAME=103,A.MISSING_OBJECT_ID=104,A.INVALID_KEY_NAME=105,A.INVALID_POINTER=106,A.INVALID_JSON=107,A.COMMAND_UNAVAILABLE=108,A.NOT_INITIALIZED=109,A.INCORRECT_TYPE=111,A.INVALID_CHANNEL_NAME=112,A.PUSH_MISCONFIGURED=115,A.OBJECT_TOO_LARGE=116,A.OPERATION_FORBIDDEN=119,A.CACHE_MISS=120,A.INVALID_NESTED_KEY=121,A.INVALID_FILE_NAME=122,A.INVALID_ACL=123,A.TIMEOUT=124,A.INVALID_EMAIL_ADDRESS=125,A.MISSING_CONTENT_TYPE=126,A.MISSING_CONTENT_LENGTH=127,A.INVALID_CONTENT_LENGTH=128,A.FILE_TOO_LARGE=129,A.FILE_SAVE_ERROR=130,A.DUPLICATE_VALUE=137,A.INVALID_ROLE_NAME=139,A.EXCEEDED_QUOTA=140,A.SCRIPT_FAILED=141,A.VALIDATION_ERROR=142,A.INVALID_IMAGE_DATA=143,A.UNSAVED_FILE_ERROR=151,A.INVALID_PUSH_TIME_ERROR=152,A.FILE_DELETE_ERROR=153,A.FILE_DELETE_UNNAMED_ERROR=161,A.REQUEST_LIMIT_EXCEEDED=155,A.DUPLICATE_REQUEST=159,A.INVALID_EVENT_NAME=160,A.INVALID_VALUE=162,A.USERNAME_MISSING=200,A.PASSWORD_MISSING=201,A.USERNAME_TAKEN=202,A.EMAIL_TAKEN=203,A.EMAIL_MISSING=204,A.EMAIL_NOT_FOUND=205,A.SESSION_MISSING=206,A.MUST_CREATE_USER_THROUGH_SIGNUP=207,A.ACCOUNT_ALREADY_LINKED=208,A.INVALID_SESSION_TOKEN=209,A.MFA_ERROR=210,A.MFA_TOKEN_REQUIRED=211,A.LINKED_ID_MISSING=250,A.INVALID_LINKED_SESSION=251,A.UNSUPPORTED_SERVICE=252,A.INVALID_SCHEMA_OPERATION=255,A.AGGREGATE_ERROR=600,A.FILE_READ_ERROR=601,A.X_DOMAIN_REQUEST=602;var p=A;t.default=p}}]);